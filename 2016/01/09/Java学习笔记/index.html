<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="随笔," />








  <link rel="shortcut icon" type="image/x-icon" href="/author.ico?v=5.1.0" />






<meta name="description" content="Java知识大全">
<meta name="keywords" content="随笔">
<meta property="og:type" content="article">
<meta property="og:title" content="Java学习笔记">
<meta property="og:url" content="http://yoursite.com/2016/01/09/Java学习笔记/index.html">
<meta property="og:site_name" content="Hui Yang&#39;s Blog">
<meta property="og:description" content="Java知识大全">
<meta property="og:updated_time" content="2016-09-19T14:50:26.648Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java学习笔记">
<meta name="twitter:description" content="Java知识大全">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 'undefined',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/01/09/Java学习笔记/"/>





  <title>Java学习笔记 | Hui Yang's Blog</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?25d5549f6b6af286e840f1034cc24b33";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hui Yang's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'du6D1jsDKiCRGdnhB_hF','2.0.0');
</script>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/01/09/Java学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="杨辉">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/author.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hui Yang's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java学习笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-01-09T19:50:25+08:00">
                2016-01-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/blog/" itemprop="url" rel="index">
                    <span itemprop="name">blog</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a class="cloud-tie-join-count" href="/2016/01/09/Java学习笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count join-count" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/2016/01/09/Java学习笔记/" class="leancloud_visitors" data-flag-title="Java学习笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                  <span class="post-meta-divider">|</span>
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  446 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          
              <div class="post-description">
                  Java知识大全
              </div>
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>补码:反码+1;<br>-n = ~n + 1;        ~n(n取反)<br>int num = Integer.parseInt(bin,2);    //把一个字符串转换成一个数字,<br>第二个参数是进制,第二个参数不写默认是十进制。<br>^    异或    相同为1,不同为0<br>a=a^b    b=a^b    a=a^b    互换<br>基本类型:<strong>byte</strong>    <strong>short</strong>    <strong>char</strong>    <strong>int</strong>    <strong>long</strong>    <strong>float</strong>    <strong>double</strong>    <strong>boolean</strong><br>int 及int以下类型的每个元素默认值是0,浮点型的默认值是0.0,boolean默认false,引用类型默认null;<br>除了8种基本类型,其他的都是引用类型<br>long now = System.currentTimeMillis();//时间的计算,当前毫秒数,距离1970年到现在的毫秒数<br>在不超过float的情况下,字面量也是可以直接赋值的,超过的情况加F或f,最好大写;<br>默认的浮点直接量为double型,如果需要表示float类型的直接量,需要加F或f后缀<br>强制转换: int a = (int)b;<br>不满int 类型的,运算时自动转换成int类型进行计算<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Random random = new Random();				//随机数,import java.util.Random;</div><div class="line">c+random.nextInt(26);					//0~25的随机数</div><div class="line">int a = i++;						//变量i使用完之后再自加1</div><div class="line">int a = ++i;						//使用变量i之前,i自加1</div><div class="line">字符串相等表示: a.equals(b);				//这里要注意空指针异常(NullPointerException),a不能为null</div><div class="line">int [] arr = new int [3];				//定义完,不赋值,数组创建之后固定长度</div><div class="line">int [<span class="string"></span>][<span class="symbol"></span>] arr = new int [<span class="string">4</span>][<span class="symbol"></span>];				//第一维的长度必须给[<span class="string">row</span>][<span class="symbol">col</span>]</div><div class="line">System.arraycopy(arr1,0,arr2,0,arr1.length);		//(被拷贝,起始位,拷贝后,起始位,拷贝长度)</div><div class="line">String str= Arrays.toString(arr);			//数组转为字符串</div><div class="line">int [] arr = Arrays.copyOf(arr,arr.length+3);		//数组扩容的简便方法</div><div class="line">System.arraycopy(src,srePos,dest,destPos,length);	//数组拷贝</div><div class="line">Arrays.sort(arr);					//正序,快速排序</div><div class="line">Arrays.toString(arr);					//转换成字符串</div></pre></td></tr></table></figure></p>
<p>带符号右位移&gt;&gt;(前面补正数0或负数1)    无符号位移&gt;&gt;&gt;(前面补0)<br>double d:保留小数:String.format(“%.2f”,d);前面补0:String.format(“%02d”,number);<br>System.exit(0);    //结束java进程<br>三目运算符后面的类型会有一个小统一;99.9:9—–&gt;99.9:9.0<br>递归:只要找到一层的规律,整个问题就解决了,代码简洁,容易产生栈溢出,能用递归做的事都能用循环,斐波那契<br>发散递归,效率极其慢(多个分支),使用递归要避免栈溢出,避免发散递归<br>好的算法的要求:正确可读健壮高效<br>栈:栈用于存放方法中的局部变量<br>堆:对象存储在堆中<br>方法区:方法区用于存放类的信息<br>import 包名+类名;</p>
<h1 id="面向对象-OOP-object-oriented-programming-封装-继承-多态"><a href="#面向对象-OOP-object-oriented-programming-封装-继承-多态" class="headerlink" title="面向对象(OOP object oriented programming):封装,继承,多态"></a>面向对象(OOP object oriented programming):封装,继承,多态</h1><h2 id="封装"><a href="#封装" class="headerlink" title="封装:"></a>封装:</h2><p>属性私有化,给外部提供访问属性的公有方法。<br>对象:类的实例化    属性和方法依赖对象存在        this代表当前对象<br>引用类型的数组,用之前不仅要给数组初始化(分配数组长度),还要给数组元素初始化(new 对象,否则空指针)<br>默认添加无参构造器,前提是该对象类无构造器<br>构造器:方法名和类名一致,并且没有返回值类型,每个类都有构造器,作用:给对象属性初始化<br>构造器可以相互调用,但是不能出现死循环。    this();调用自己的构造器(无参构造器)<br>习惯:实体类先把无参构造器写上(无论无参构造器需不需要)<br>局部代码块:局部位置,用于限定变量的生命周期<br>构造代码块:在类的成员位置,每次调用构造都执行,并且在构造方法前执行,多个构造方法中相同的代码存放到一起,对对象进行初始化<br>静态代码块:一般是对类进行初始化,    同一个类中,静态代码块在main方法前执行(不论顺序)<br>继承:java语言不支持多重继承,一个类只能继承一个父类,一个父类可以有多个子类<br>1.子类继承父类,就继承了父类所有的属性和方法<br>2.子类对象创建之前,先创建父类对象<br>3.子类构造器默认调用父类的无参构造器:super();<br>子类方法可调用super.方法();<br>private修饰的成员变量和方法仅仅只能在本类中调用;<br>public修饰的成员变量和方法可以在任何地方调用<br>protected:子类或同包能够访问<br>方法签名:方法名,参数<br>方法重载Overload:在一个类中,方法名一样,参数不一样(参数个数,类型,顺序不一样);静态方法不会重载<br>方法重写Override:方法签名(方法名,参数)相同<br>重写和返回值类型的关系:返回值类型必须一样;如果是引用类型,子类方法的返回值类型必须是父类的返回值<br>类型的子类或相同。<br>重写和访问控制符的关系:子类重写的方法必须比父类的方法更开放。<br>静态的方法不存在重写,父类的私有方法不能被重写<br>多态:    Father f = new Child();<br>多态:编译看左边,运行看左边(成员变量,静态方法),运行看右边(成员方法)<br>在同一个类中,通过方法的重载实现多态</p>
<h2 id="抽象"><a href="#抽象" class="headerlink" title="抽象:"></a>抽象:</h2><p>抽象方法和抽象类<br>由abstract修饰的方法为抽象方法,抽象方法只有方法的定义,没有方法体实现,用一个分号结尾;<br>一个类中如果包含抽象方法,该类应该用abstract关键字声明为抽象类;<br>如果一个类继承了抽象类,必须重写其抽象方法(除非该类也声明为抽象类)<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title">abs</span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method</span>(<span class="params"></span>)</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>抽象类不可以实例化,即使一个类中没有抽象方法,也可以将它定义为抽象类<br>abstract和final关键字 不可以同时修饰一个类,final使得类不能被继承,而abstract修饰的类<br>如果不继承将没有任何意义<br>一个类继承了抽象类后必须重写其抽象方法<br>抽象类的意义:<br>1.为其子类提供一个公共的类型<br>2.封装子类中的重复内容(成员变量和方法)<br>3.定义有抽象方法,子类虽然有不同的实现,但该方法的定义是一致的</p>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口:"></a>接口:</h2><p>接口可以看成特殊的抽象类,即只包含抽象方法的抽象类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Runner</span>()</span>&#123;</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> DEFAULT_SPEED = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>通过interface关键字定义接口<br>接口中不可以定义成员变量,但是可以定义常量<br>接口中只可以定义没有实现的方法(抽象方法)(可以省略 public abstract);<br>一个类可以通过implements关键字实现接口(多个接口用逗号分隔),<br>一个类实现了某个接口后,必须实现该接口中定义的所有方法。<br>接口可以作为一种类型声明变量,一个接口类型变量可以引用实现了该接口的类的对象,<br>通过该变量可以调用该接口中定义的方法(具体的实现类提供了方法的实现)。<br>例:Collection c = new ArrayList();(c只能用Collection中有的方法)<br>接口的继承:子接口继承了父接口中定义的所有方法</p>
<h2 id="内部类-一个类-Inner-定义在另一个类-Outer-的内部-对外不具备可见性-Inner可以调用Outer的"><a href="#内部类-一个类-Inner-定义在另一个类-Outer-的内部-对外不具备可见性-Inner可以调用Outer的" class="headerlink" title="内部类:一个类(Inner)定义在另一个类(Outer)的内部,对外不具备可见性,Inner可以调用Outer的"></a>内部类:一个类(Inner)定义在另一个类(Outer)的内部,对外不具备可见性,Inner可以调用Outer的</h2><p>如果一个类定义在了一个方法中,要调用该方法中的变量(该类与该变量同级,那么该变量要用final修饰)<br>成员和方法(包括private)<br>匿名内部类:Action action = new Action(){};</p>
<h2 id="static-静态的-不依赖对象存在的"><a href="#static-静态的-不依赖对象存在的" class="headerlink" title="static:静态的,不依赖对象存在的"></a>static:静态的,不依赖对象存在的</h2><p>1.修饰属性:属性每次改变都保存,类名可直接调用该属性<br>2.修饰方法:静态方法内不能使用非静态属性及方法<br>3.修饰代码块:静态代码块最先调用,只调用一次。被加载就被执行<br>4.修饰类:内部类</p>
<h2 id="final"><a href="#final" class="headerlink" title="final:"></a>final:</h2><p>1.修饰属性:常量,不能被修改(常量命名规范:全部大写),引用类型的常量只需保证引用不变<br>2.修饰方法:不能被重写<br>3.修饰类:不能被继承<br>什么时候类会被加载?<br>1.实例化对象时    Child cd = new Child();<br>2.使用它的静态属性,方法<br>3.实例化子类对象时,父类会被加载<br>4.使用子类的静态属性,静态方法,父类会被加载<br>5.反射相关<br>类加载过程(1.创建类的对象2.调用类的静态属性和方法3.创建该类的子类对象时):(加载)Zi z = (实例化) new Zi();<br>用到某一个类就加载,懒惰式加载(只加载一次);<br>1.将类中的方法加载到方法区<br>2.将类中的静态属性开辟空间并初始化(0,null)<br>3.静态属性进行赋值操作并同时执行静态代码块(谁在前谁先执行)<br>对象实例化的过程:<br>1.在堆中开辟空间,给非静态属性开辟空间并初始化<br>2.给非静态属性赋值并同时执行非静态代码块,从上至下<br>3.最后调用构造器,递归调用(先父后本)    父类构造器在2之前</p>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><p>是指一个用来描述或者匹配一系列符合某个句法规则的字符串的单个字符串。其实就是一种规则<br>(反斜线)代表转义作用,\代表’\’<br>字符类:<br>[abc]    a,b或c<br>[^abc]    任何字符,除了a,b或c<br>[a-zA-Z]    a-z或A-Z,两头的字母包括在内(范围)<br>[0-9]    0-9的字符都包括<br>预定义字符类:<br>    .    任何字符(字符本身.)<br>\d    [0-9]<br>\w    [a-zA-Z0-9]<br>\s    空白字符[\t\n\f\r]<br>边界匹配器:<br>^    行的开头<br>$    行的结尾<br>\b    单词边界,就是不是单词的地方<br>Greedy数量词:<br>x?    x,一次或一次也没有<br>x*    x,零次或多次<br>x+    x,一次或多次<br>x{n}    x,恰好n次<br>x{n,}    x,至少n次<br>x{n,m}    x,至少n次,但是不超过m次</p>
<h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">str</span>.toUpperCase();			<span class="comment">//转换成大写</span></div><div class="line"><span class="built_in">str</span>.toLowerCase();			<span class="comment">//转换成小写</span></div><div class="line"><span class="built_in">str</span>.equals(str1);</div><div class="line"><span class="built_in">str</span>.equalsIgnoreCase(str1);</div><div class="line"><span class="built_in">boolean</span>	str1.startsWith(<span class="built_in">str</span>);;		<span class="comment">//返回布尔变量,以某个字符串开头</span></div><div class="line"><span class="built_in">boolean</span> str1.endsWith(<span class="built_in">str</span>);		<span class="comment">//以某字符串结尾</span></div><div class="line"><span class="built_in">str</span>.isEmpty();				<span class="comment">//判断字符串是否为空</span></div><div class="line"><span class="built_in">boolean</span> str1.contains(<span class="built_in">str</span>);		<span class="comment">//包含某个字符串</span></div><div class="line"><span class="built_in">int</span> str1.indexOf(<span class="built_in">str</span>);			<span class="comment">//返回指定字符串(字符)在此字符串中第一次出现处的索引</span></div><div class="line"><span class="built_in">int</span> str1.indexOf(<span class="built_in">str</span>,num);		<span class="comment">//返回指定字符串在此字符串中从指定位置后第一次出现处的索引</span></div><div class="line"><span class="built_in">int</span> str1.lastIndexOf(<span class="built_in">str</span>);		<span class="comment">//从后开始找返回str第一次出现的角标</span></div><div class="line"><span class="keyword">String</span> substring((<span class="built_in">int</span>)start);		<span class="comment">//从指定位置开始截取字符串,默认到结尾</span></div><div class="line"><span class="keyword">String</span> substring(start,end);		<span class="comment">//从指定位置开始，指定位置结束截取字符串,包头不包尾</span></div><div class="line"><span class="keyword">String</span> str1.<span class="built_in">concat</span>(str2);		<span class="comment">//字符串拼接</span></div><div class="line"><span class="built_in">int</span>	<span class="built_in">str</span>.compareTo(str1);		<span class="comment">//比较两字符串大小,1&gt;;0=;-1&lt;;</span></div><div class="line"><span class="built_in">int</span> <span class="built_in">str</span>.compareToIgnoreCase(str1);	<span class="comment">//比较两字符串大小,忽略大小写</span></div><div class="line"><span class="keyword">String</span> <span class="built_in">str</span>.replace(str1,str2);		<span class="comment">//在str字符串中,str2替换str1</span></div><div class="line"><span class="keyword">String</span>[] <span class="built_in">str</span>.<span class="built_in">split</span>(regex);		<span class="comment">//切割字符串</span></div><div class="line"><span class="built_in">boolean</span>	<span class="built_in">str</span>.matches(regex);		<span class="comment">//判断功能</span></div><div class="line"><span class="keyword">String</span> <span class="built_in">str</span>.<span class="built_in">trim</span>();			<span class="comment">//去首尾空格</span></div><div class="line"><span class="built_in">char</span> charAt(index);			<span class="comment">//获取索引位置字符</span></div><div class="line"><span class="built_in">char</span> [] <span class="built_in">str</span>.toCharArray();		<span class="comment">//将字符串转换成字符数组</span></div><div class="line"><span class="built_in">byte</span>[] <span class="built_in">str</span>.getBytes();			<span class="comment">//把字符串转换为字节数组</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">String</span>.valueOf(x);		<span class="comment">//将各种类型的x转换为字符串</span></div></pre></td></tr></table></figure>
<p>输出对象的时候,相当于调用对象的toString()方法<br>基本类型比较的是值是否相同;引用类型:比较的就是地址值是否相同<br>String的equals()方法是重写自Object类的,比较的是字符串的内容是否相同<br>java.util<br>Scanner sc = new Scanner(System.in);<br>boolean sc.hasNextXxx();    判断是否是某种类型的元素<br>Xxx    sc.nextXxx();    获取该元素<br>String sc.nextLine();获取一个String类型的值;回车作为第二个字符串的开始<br>字符串是常量,一旦被赋值,就不能被改变。值被改变是因为字符串的指向改变了(引用)<br>字符串如果是变量相加,先开空间,再拼接;如果是常量相加,先加,在常量池里找,有则直接返回,没有创建<br>String s1 = “abc”;    创建一个对象常量池找<br>String s2 = new String(“abc”);    创建2个对象,栈—&gt;堆—&gt;常量池</p>
<h2 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h2><p>StringBuffer 线程安全的可变字符序列,一个类似于String的字符缓冲区,但不能修改<br>StringBuilder:与StringBuffer类似,不保证同步(效率高),一般用StringBuilder;<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">StringBuilder </span><span class="built_in">sb</span>.append(<span class="keyword">str);	</span>	//将任意类型加入到字符串缓冲区</div><div class="line"><span class="keyword">StringBulider </span><span class="built_in">sb</span>.deleteCharAt(index)<span class="comment">;	//删除指定位置的字符，并返回sb本身</span></div><div class="line"><span class="keyword">StringBuilder </span><span class="built_in">sb</span>.delete(start,<span class="meta">end</span>)<span class="comment">;	//删除从指定位置开始指定位置结束的内容,并返回本身</span></div><div class="line"><span class="keyword">StringBuilder </span><span class="built_in">sb</span>.replace(start,<span class="meta">end</span>,<span class="keyword">str);//从str开始到end结束用str替换</span></div><div class="line"><span class="keyword">String </span><span class="built_in">sb</span>.<span class="keyword">subString(start);	</span>	//截取</div><div class="line"><span class="keyword">String </span><span class="built_in">sb</span>.<span class="keyword">subString(start,end);</span></div><div class="line"><span class="keyword">StringBuilder </span><span class="built_in">sb</span>.<span class="keyword">reverse();	</span>	//反转</div></pre></td></tr></table></figure></p>
<p>StringBuilder–&gt;String:String str = new String(sb);sb.toString;<br>String–&gt;StringBuilder:StringBuilder sb = new StringBuilder(str);<br>形式参数:<br>基本类型:形式参数的改变不影响实际参数<br>引用类型:形式参数的改变直接影响实际参数<br>字符串是特殊的引用类型，只能当作基本类型来看,形参改变无影响<br>(因为字符串改变时，指向改变了。形参还是原来的指向)<br>StringBuilder(StringBuffer)形参为引用</p>
<h2 id="Integer"><a href="#Integer" class="headerlink" title="Integer:"></a>Integer:</h2><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">String</span> bin = <span class="built_in">Integer</span>.toBinaryString(i);	<span class="comment">//将i转成二进制字符串</span></div><div class="line"><span class="built_in">String</span> bin = <span class="built_in">Integer</span>.toOctalString(i);	<span class="comment">//将i转成八进制字符串</span></div><div class="line"><span class="built_in">String</span> hex = <span class="built_in">Integer</span>.toHexString(i);	<span class="comment">//将i转成十六进制字符串</span></div><div class="line">int <span class="built_in">Integer</span>.MAX_VALUE;</div><div class="line">int <span class="built_in">Integer</span>.MIN_VALUE;</div></pre></td></tr></table></figure>
<p>1.Integer in = new Integer(str);int i = in.intValue();    //String–&gt;int<br>2.int i = Integer.parseInt(str);<br>十进制到其他进制:<br>Integer.toString(100,x);<br>Integer.parseInt(100,x);</p>
<h2 id="JDK5新特性"><a href="#JDK5新特性" class="headerlink" title="JDK5新特性"></a>JDK5新特性</h2><p>自动装箱:把基本类型转换为包装类类型<br>自动拆箱:把包装类类型转换为基本类型</p>
<h2 id="类Math："><a href="#类Math：" class="headerlink" title="类Math："></a>类Math：</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> <span class="literal">PI</span>;			<span class="comment">//圆周率π</span></div><div class="line"><span class="keyword">static</span> <span class="built_in">int</span> <span class="built_in">abs</span>(<span class="built_in">int</span> num);		<span class="comment">//绝对值</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">double</span> <span class="built_in">ceil</span>(<span class="keyword">double</span> d);		<span class="comment">//向上取整</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">double</span> <span class="built_in">floor</span>(<span class="keyword">double</span> d);		<span class="comment">//向下取整</span></div><div class="line"><span class="keyword">static</span> <span class="built_in">max</span> (<span class="built_in">int</span> a ,<span class="built_in">int</span> b ,);		<span class="comment">//最大值	min最小值</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">double</span> <span class="built_in">pow</span>(<span class="keyword">double</span> a,<span class="keyword">double</span> b);	<span class="comment">//a的b次幂</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">double</span> <span class="built_in">random</span>();			<span class="comment">//随机数[0.0,1.0)</span></div><div class="line"><span class="keyword">static</span> <span class="built_in">int</span> <span class="built_in">round</span>(<span class="built_in">float</span> a);		<span class="comment">//四舍五入</span></div><div class="line"><span class="keyword">static</span> <span class="keyword">double</span> <span class="built_in">sqrt</span>(a);			<span class="comment">//a的正平方根</span></div></pre></td></tr></table></figure>
<h2 id="类Date"><a href="#类Date" class="headerlink" title="类Date:"></a>类Date:</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Date</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>();		util包下</div><div class="line">Long d.getTime();		获取时间,以毫秒为单位</div><div class="line">Void d.setTime(<span class="built_in">time</span>);	设置时间,通过毫秒值获取时间</div></pre></td></tr></table></figure>
<h2 id="类SimpleDateFormat"><a href="#类SimpleDateFormat" class="headerlink" title="类SimpleDateFormat"></a>类SimpleDateFormat</h2><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">String</span> str =<span class="string">"yyyy年MM月dd日HH:mm:ss"</span>; </div><div class="line">SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(str);	</div><div class="line"><span class="built_in">Date</span>--&gt;<span class="keyword">String</span>:	<span class="keyword">String</span> str = sdf.<span class="keyword">format</span>(d);</div><div class="line"><span class="keyword">String</span>--&gt;<span class="built_in">Date</span>:	<span class="built_in">Date</span> d= sdf.<span class="built_in">parse</span>(str);</div></pre></td></tr></table></figure>
<h2 id="类Calendar-日历类"><a href="#类Calendar-日历类" class="headerlink" title="类Calendar(日历类)"></a>类Calendar(日历类)</h2><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Calender calender = Calender.getInstance();		<span class="comment">//得到当前时间</span></div><div class="line"><span class="built_in">int</span> <span class="built_in">year</span> = calender.<span class="built_in">get</span>(Calender.YEAR);			<span class="comment">//获取该时间的年</span></div><div class="line"><span class="keyword">final</span> <span class="keyword">void</span> calender.<span class="built_in">set</span>(<span class="built_in">int</span> <span class="built_in">year</span>,<span class="built_in">int</span> <span class="built_in">month</span>,<span class="built_in">int</span> date);	<span class="comment">//设置时间</span></div><div class="line"><span class="keyword">void</span> calender.<span class="built_in">add</span>(<span class="built_in">int</span> field,<span class="built_in">int</span> amount);		<span class="comment">//为该时间的某个量加上值</span></div><div class="line">Calender--&gt;Date: Date d = calender.getTime();</div></pre></td></tr></table></figure>
<h2 id="集合类"><a href="#集合类" class="headerlink" title="集合类"></a>集合类</h2><p>集合类(Collection):数组的长度是固定的,为了适应变化的数组,Java提供了集合类,<br>数组储存的是同一种类型的元素,而集合可以储存不同类型的元素。数组可以储存基本数据类型和引用数据类型<br>而集合只能储存引用数据类型<br>Collection(List有序,可重复;Set无序唯一):是集合的顶层接口,它的子体系有重复的，有唯一的，有有序的，有无序的。<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Collection c = <span class="keyword">new</span> ArrayList();		</div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">add</span><span class="params">(obj)</span></span>;			<span class="comment">//添加一个元素</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">add</span><span class="params">(Collection c)</span></span>;		<span class="comment">//添加一个集合的元素</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">remove</span><span class="params">(obj)</span></span>;			<span class="comment">//移除一个元素(给定元素第一个,equals比较为true);</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">removeAll</span><span class="params">(Collection c1)</span></span>;	<span class="comment">//移除一个集合的元素,只要有一个就return true;</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">contains</span><span class="params">(obj)</span></span>;		<span class="comment">//判断集合中是否包含指定的元素</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">containsAll</span><span class="params">(Collection c1)</span></span>;	<span class="comment">//判断集合中是否包含指定的集合元素(包含所有元素才叫包含)</span></div><div class="line"><span class="function"><span class="keyword">void</span> c.<span class="title">clear</span><span class="params">()</span></span>;				<span class="comment">//移除所有元素</span></div><div class="line"><span class="function"><span class="keyword">boolean</span> c.<span class="title">isEmpty</span><span class="params">()</span></span>;			<span class="comment">//判断集合是否为空</span></div><div class="line"><span class="keyword">int</span>	c.size();			<span class="comment">//集合的长度</span></div></pre></td></tr></table></figure></p>
<p>集合–&gt;数组:Object[] c.toArray();</p>
<h3 id="迭代器方法"><a href="#迭代器方法" class="headerlink" title="迭代器方法:"></a>迭代器方法:</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Iterator <span class="keyword">it</span> = c.iterator();<span class="comment">	//获取迭代器</span></div><div class="line">boolean <span class="keyword">it</span>.hasNext();	<span class="comment">	//判断是否还有下一个元素</span></div><div class="line">E <span class="keyword">it</span>.next();		<span class="comment">	//返回迭代器的下一个元素</span></div><div class="line"><span class="keyword">it</span>.remove();		<span class="comment">	//迭代器删除元素</span></div></pre></td></tr></table></figure>
<p>List集合的特点:有序(存储和取出的元素一致),可重复<br>List集合方法:<br>List list = new ArrayList();<br>void list.add(index,ele);    在指定位置添加元素,原位置及后续元素顺序向后移动<br>list.get(index);    获取指定位置的元素<br>ArrayList:底层数据结构是数组,增删慢,查询快,线程不安全,效率高<br>Vector:底层数据结构是数组,查询快,增删慢,线程安全,效率低<br>LinkedList:底层数据结构是链表,增删快,查询慢,线程不安全,效率高</p>
<h3 id="LinkedList集合方法"><a href="#LinkedList集合方法" class="headerlink" title="LinkedList集合方法:"></a>LinkedList集合方法:</h3><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">LinkedList <span class="keyword">link</span> = <span class="literal">new</span> LinkedList();</div><div class="line"><span class="literal">void</span> <span class="keyword">link</span>.addFirst(obj);		<span class="comment">//集合开头添加元素</span></div><div class="line"><span class="literal">void</span> <span class="keyword">link</span>.addLast(obj);			<span class="comment">//集合结尾添加元素</span></div><div class="line">obj	<span class="keyword">link</span>.getFirst();		<span class="comment">//得到集合第一个元素</span></div><div class="line">obj	<span class="keyword">link</span>.getLast();			<span class="comment">//得到集合最后一个元素</span></div><div class="line">obj	<span class="keyword">link</span>.removeFirst();		<span class="comment">//返回被删元素</span></div><div class="line">obj	<span class="keyword">link</span>.removeLast();		<span class="comment">//返回被删元素</span></div></pre></td></tr></table></figure>
<p><strong><em>泛型</em></strong>(泛型类型必须是引用类型):是一种把类型明确的工作推迟到创建对象或者调用方法的时候才去明确的特殊的类型<br>泛型把运行时期的问题提前到了编译时期,避免了强制类型转换,优化程序设计,提高了程序的安全性<br>把泛型定义在类上:public class 类名&lt;泛型类型1,泛型类型2…&gt;<br>把泛型定义在方法上:public &lt;泛型类型&gt;    返回类型    方法名(泛型类型T);<br>把泛型定义在接口上:    public interface 接口名&lt;泛型类型1,泛型类型2…&gt;;<br><strong><em>增强for</em></strong>(JDK5新特性,本质为迭代器)(不能用集合方法删元素):<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">for</span>(<span class="keyword">String</span> s :arr)&#123;</div><div class="line">	System.out.<span class="built_in">println</span>(s);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Set接口:无序(存储顺序和取出顺序不一致),唯一;有自己的存储顺序<br>TreeSet(排序和唯一):底层是二叉树结构,能够对元素按照某种规则进行排序    </p>
<h3 id="自然排序"><a href="#自然排序" class="headerlink" title="自然排序:"></a>自然排序:</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">Point</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Point</span>&gt;</span>&#123;</div><div class="line">	public <span class="built_in">int</span> compareTo(Piont p)&#123;</div><div class="line">		<span class="built_in">int</span> <span class="built_in">num</span> = <span class="keyword">this</span>.getX()-p.getX();</div><div class="line">		<span class="built_in">int</span> num2 = <span class="built_in">num</span>==<span class="number">0</span>?<span class="keyword">this</span>.getY()-p.getY():<span class="built_in">num</span>;</div><div class="line">		<span class="keyword">return</span> num2;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="比较器排序"><a href="#比较器排序" class="headerlink" title="比较器排序:"></a>比较器排序:</h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Comparator&lt;<span class="keyword">String</span>&gt; com1 = <span class="keyword">new</span> Comparator&lt;<span class="keyword">String</span>&gt;()&#123;</div><div class="line">	<span class="keyword">public</span> <span class="built_in">int</span> compare(<span class="keyword">String</span> o1,<span class="keyword">String</span> o2)&#123;</div><div class="line">		<span class="keyword">return</span> o1.length()-o2.length()</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line">Collections.<span class="built_in">sort</span>(list,com1);</div></pre></td></tr></table></figure>
<p>HashSet:有自己的储存顺序,例如从小到大<br>Map集合:可以存储键值对的元素,将键映射到值的对象,一个映射不能包含重复的键;每个<br>键最多只能映射到一个值.Map集合存储元素是成对出现的,键是唯一的,值是可重复的<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//10是容量,但是.size()还算要看放进去几个键值对。Collection中也一样</span></div><div class="line">Map&lt;Integer,<span class="keyword">String</span>&gt; <span class="built_in">map</span> = <span class="keyword">new</span> <span class="keyword">HashMap</span>&lt;Integer,<span class="keyword">String</span>&gt;(<span class="number">10</span>);</div><div class="line">V	<span class="built_in">map</span>.put(<span class="built_in">key</span>,value);		<span class="comment">//添加元素,若已有key,value被覆盖,返回值为“前妻”。若无该key,返回null</span></div><div class="line">V	<span class="built_in">map</span>.remove(<span class="built_in">key</span>);		<span class="comment">//根据键删除键值对元素,并把删除掉的值返回</span></div><div class="line"><span class="keyword">void</span>	<span class="built_in">map</span>.<span class="built_in">clear</span>();			<span class="comment">//移除所有的键值对元素</span></div><div class="line"><span class="built_in">int</span> <span class="built_in">map</span>.<span class="built_in">size</span>();				<span class="comment">//返回集合中键值对的对数</span></div><div class="line"><span class="built_in">boolean</span> <span class="built_in">map</span>.containsKey(<span class="built_in">key</span>);		<span class="comment">//判断集合是否包含指定的键</span></div><div class="line"><span class="built_in">boolean</span> <span class="built_in">map</span>.containsValue(value);	<span class="comment">//判断集合是否包含指定的值</span></div><div class="line"><span class="built_in">boolean</span> <span class="built_in">map</span>.isEmpty();			<span class="comment">//判断集合是否为空</span></div><div class="line">Set&lt;Entry&lt;<span class="keyword">String</span>,Integer&gt;&gt; entryset = <span class="built_in">map</span>.entrySet();	<span class="comment">//获取键值对对象的集合</span></div><div class="line">V	<span class="built_in">map</span>.<span class="built_in">get</span>(<span class="built_in">key</span>);			<span class="comment">//根据键获取值,无该键返回null</span></div><div class="line">Set&lt;K&gt;	keyset = <span class="built_in">map</span>.keySet();		<span class="comment">//获取集合中所有键的集合</span></div><div class="line">Collection&lt;V&gt; values = <span class="built_in">map</span>.values();	<span class="comment">//获取集合中所有值的集合</span></div></pre></td></tr></table></figure></p>
<p>LinkedHashMap:有序的Map<br>TreeMap:(TreeSet大部分方法调用了TreeMap中方法,无序(基于红黑树(red-black tree)数据结构实现, 按 key 排序.))<br>HashMap:使用哈希表(hash table)实现, 在 keys 和/或 values 之中,都是无序的.<br>HashTable:Hashtable 与HashMap实现方式一样,但Hashtable属于同步(synchronized)的.<br>Collections:是针对集合操作的工具类,有对集合进行排序和二分查找的方法<br>Vector和Hashtable,Properties是同步的,ArrayList和HashMap不是同步的<br>栈(Stack):先进后出;<br>E pop():移除栈顶部对象,并返回该值;E push(E item):把对象压入栈顶;E peek():查看栈顶对象;boolean empty():测试该栈是否为空<br>队列:先进先出:BlockingQueue<integer> queue = new ArrayBlockingQueue<integer>(10);<br>boolean b =queue.offer(i,5,TimeUnit.SECONDS);将对象添加至队尾;Integer num  =queue.poll(5,TimeUnit.SECONDS);从队首删除并返回一个元素5,TimeUnit.SECONDS 可不写</integer></integer></p>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理:"></a>异常处理:</h2><figure class="highlight xquery"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line"></div><div class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">	e.printStackTrace();</div><div class="line">	&#125;finally&#123;</div><div class="line">	</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p>多个异常处理:多个try{}catch{};一个try{}多个catch{};<br>运行时异常:RuntimeException类及其子类的实例,非检测异常<br>编译时异常:其他异常,必需处理<br>自定义异常:必须继承自Exception或RuntimeException<br>throws:方法上抛出异常对象<br>throw:方法内部抛出异常对象<br>子类重写父类的方法时,子类的方法必须抛出相同的异常或父类异常的子类或者不抛或者抛一部分<br>如果父类抛出多个异常,子类重写父类时,只能抛出相同的异常或者是它的子集,子类不能抛出<br>父类没有的异常,如果被重写的方法没有异常抛出,子类只能try{}catch(){},不能throws;<br>final:可以修饰类,成员方法,成员变量.修饰类,类不能被继承.<br>修饰方法,方法不能被重写.修饰变量,变量是常量<br>finally:异常处理的一部分,被finally控制的语句体一定会被执行,除非finally{}前有System.exit(0)了。<br>finalize:是Object类的一个方法,用于垃圾的回收</p>
<h2 id="类File"><a href="#类File" class="headerlink" title="类File"></a>类File</h2><p>File file = new File(“.”+File.separator+”demo.text”);<br>File file1 = new File(file,”a.text”);<br>创建功能:public boolean createNewFile():创建文件,如果存在这样的文件,就不创建了。<br>public boolean mkdir();创建文件夹,如果存在这样的文件夹就不创建;public boolean mkdirs();创建文件夹,如果父文件夹不存在,会帮你创建。<br>删除功能:public boolean delete();删除一个文件(夹),文件夹内不能包含文件(夹);删除成功返回true,失败返回false;<br>判断功能:public boolean isDirectory();判断是否目录;public boolean isFile();判断是否文件;public boolean exists();判断是否存在<br>获取功能:public String getName();获取名称;public long length();获取长度,字节数;public long lastModified();获取最后一次修改时间,毫秒值<br>public String[] list();获取指定目录下所有文件(夹)的名称数组;public File[] listFiles();获取指定目录下所有文件(夹)的File数组;<br>递归删除多级目录:<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public static void deleteFile(File file)&#123;</div><div class="line">	<span class="keyword">if</span>(file.isDirectory())&#123;</div><div class="line">		File[] subs = file.listFiles();</div><div class="line">		<span class="keyword">for</span>(File <span class="function"><span class="keyword">sub</span>:<span class="title">subs</span>)</span>&#123;</div><div class="line">			deleteFile(<span class="function"><span class="keyword">sub</span>)</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	file.delete();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h2><p>InputStream(IS)(所有字节输入流的父类);<br>int read():读取一个字节,以int形式返回,返回值为-1,则读完;int read(byte[] d):读取d.length的字节存到d中,返回值为实际读到的字节量<br>OutputStream(OS)(所有字节输出流的父类);<br>void write(int d):写出一个字节;void write(byte[] d):将d的所有字节写出<br>字节流:<br>FileOutputStream(FOS):<br>构造函数:FileOutputStream(File file);向file写数据(重写模式)FileOutputStream(String filename);向名字为filename的文件写数据(重写模式);<br>void write(int d);void write(byte[] d);void write(byte[] d,int offset,int len);将d中从偏移量off开始的len字节写入此文件输出流<br>追加模式:FileOutputStream(File file,true);FileOutputStream(String filename,true);<br>FileInputStream(FIS):<br>FileInputStream(File file);FileInputStream(String name);int read();int read(byte[] d);<br>高级字节流:<br>缓冲字节输出流(BOS):BufferedOutputStream bos = new BufferedOutputStream(fos);所有字节被存入缓冲区等待一次性写出;bos.close();关闭流之前会将缓冲区内容写出;<br>        void flush();清空缓冲区,将缓冲区中的数据强制写出;<br>缓冲字节输入流(BIS):BufferedInputStream bis = new FileInputStream(fis);        bis.close();<br>int d = -1;<br>while((d=bis.read())!=-1){<br>    System.out.print(d);<br>}<br>字符流:<br>Reader是字符输入流的父类;<br>int read();读取一个字符;int read(char[] chs);读取chs.length个字符到chs中,返回值为读到的字符量;<br>Writer是字符输出流的父类;<br>void write(int c);写出一个字符;void write(char[] chs);将给定chs写出;void write(char[] chs,int offset,int len);void write(String str);将给定字符串写出<br>字符转换流(字符流子类,实现字符流方法)(将字节流转换为字符流,可以设置字符集):<br>InputStreamReader:构造方法:InputStreamReader(InputStream in,String charsetName);InputStreamReader(InputStream in);<br>OutputStreamWriter:构造方法:OutputStreamWriter(OutputStream out,String charsetName);OutputStreamWriter(OutputStream out);<br>高级流:<br>缓冲字符输出流(PW):PrintWriter:PrintWriter(File file);PrintWriter(String fileName);PrintWriter(OutputStream os);PrintWriter(Writer writer);<br>PrintWriter(OutputStream os,boolean autoFlush);PrintWriter(Writer writer,boolean autoFlush);autoFlush判断是否自动行刷新.<br>void print/println(八种基本类型):通过该方法写出的内容会被实际写出;<br>缓冲字符输入流(BR):BufferedReader:构造方法:BufferedReader(Reader reader);String readLine();读一行<br>对象序列化(OOS):ObjectOutputStream oos = new ObjectOutputStream(fos);void writeObject(Object o);将对象转换为字节序列<br>需要序列化所属的类必须实现Serializable接口;关键字transient:被该关键字修饰的属性在序列化时,其值将被忽略(瘦身);<br>对象反序列化(OIS):ObjectInputStream ois = new ObjectInputStream(fis);Object readObject();将字节序列转换为对应对象;</p>
<h2 id="输入输出到文件中"><a href="#输入输出到文件中" class="headerlink" title="输入输出到文件中"></a>输入输出到文件中</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> Input()<span class="keyword">throws</span> Exception&#123;</div><div class="line">	InputStream in = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"."</span>+<span class="keyword">File</span>.separator+<span class="string">"demo.txt"</span>));</div><div class="line">	InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(in,<span class="string">"utf-8"</span>);</div><div class="line">	BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);</div><div class="line">	String s = <span class="keyword">null</span>;</div><div class="line">	StringBuilder sb = <span class="keyword">new</span> StringBuilder();</div><div class="line">	<span class="keyword">while</span>((s=br.readLine())!=<span class="keyword">null</span>)&#123;</div><div class="line">		System.out.<span class="keyword">println</span>(s);</div><div class="line">		<span class="keyword">if</span>(s.indexOf(<span class="string">"881101"</span>) == <span class="number">0</span>) sb.<span class="keyword">append</span>(s.substring(<span class="number">7</span>, s.length())+<span class="string">","</span>);</div><div class="line">	&#125;</div><div class="line">	System.out.<span class="keyword">println</span>(sb);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Test</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> Output() <span class="keyword">throws</span> Exception&#123;</div><div class="line">	</div><div class="line">	OutputStream out = <span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">"."</span>+<span class="keyword">File</span>.separator+<span class="string">"demo.txt"</span>),<span class="keyword">true</span>);</div><div class="line">	OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(out,<span class="string">"utf-8"</span>);</div><div class="line">	PrintWriter pw = <span class="keyword">new</span> PrintWriter(osw,<span class="keyword">true</span>);</div><div class="line">	pw.<span class="keyword">println</span>(<span class="string">"Hello"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="多线程-t-start-后才执行run-方法"><a href="#多线程-t-start-后才执行run-方法" class="headerlink" title="多线程(t.start();后才执行run()方法):"></a>多线程(t.start();后才执行run()方法):</h2><p>进程与线程的区别:一个进程可以包含多个线程,进程有独立内存单元,线程共享内存单元<br>并发原理:获取时间片的线程被CPU运行,其他线程全部等待<br>使用Thread创建并启动线程(继承Thread并重写run()方法):<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</div><div class="line">	public void run()&#123;</div><div class="line">		<span class="type">System</span>.out.println(<span class="string">"aaa"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">public static void main(<span class="type">String</span>[] args)&#123;</div><div class="line">	<span class="type">Thread</span> t1  = <span class="keyword">new</span> <span class="type">MyThread</span>();</div><div class="line">	t1.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用Runnable创建并启动线程(使用Runnable接口,定义其实现类):<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</div><div class="line">		System.out.println(<span class="string">"aa"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">	Runnable r1 = <span class="keyword">new</span> MyRunnable();</div><div class="line">	Thread t1  = <span class="keyword">new</span> Thread(r1);</div><div class="line">	t1.start();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>使用匿名内部类创建线程:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">Thread t1 = <span class="keyword">new</span> Thread()&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</div><div class="line">		System.out.<span class="built_in">println</span>(<span class="string">"aa"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line">Thread t2 = <span class="keyword">new</span> Thread(r);</div><div class="line">Runnable r = <span class="keyword">new</span> Runnable()&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="built_in">run</span>()&#123;</div><div class="line">		System.out.<span class="built_in">println</span>(<span class="string">"aa"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line">t1.start();</div><div class="line">t2.start();</div></pre></td></tr></table></figure></p>
<p>Thread current = Thread.currentThread();获取运行当前代码片段的线程;Thread t = new Thread(“构造方法中加字符串自定义名字”);<br>long getId():返回该线程标识符;String getName():返回该线程名称;int getPriority():返回线程优先级;boolean isAlive():测试线程是否处于活动状态<br>设置线程优先级:void setPriority(int priority);<br>守护线程:void setDaemon(boolean);boolean isDaemon();当进程只有守护线程,所有守护线程终止,GC就是运行在一个守护线程上<br>sleep:static void sleep(long ms);使当前线程进入阻塞状态指定毫秒;<br>yield:static void yield():使当前线程主动让出时间片回到Runnable状态,等待分配时间片;void join():等待当前线程结束<br>synchronized(同步锁)关键字:将异步操作(并发)变为同步操作(你干完我再干)<br>多线程并发读写同一个临界变量(多线程共享实例变量/静态公共变量)时发生线程安全问题;<br>锁机制:<br>同步代码块:进入同步代码块或者方法会自动上锁,退出后自动解锁<br>synchronized(同步监视器–锁对象引用){  //代码块}    若方法所有代码需要同步也可以直接给方法上锁;好几个同步代码块用了this,第一个代码块进入了线程,其他代码块都不能用<br>多个需要同步的线程在访问该同步块时,看到的应该是同一个锁对象引用，否则达不到同步效果。通常我们会使用this来作为锁对象<br>静态方法锁的是类对象(this变为 类名.class),非静态方法锁的是当前方法所属对象;this指的是当前对象,<br>wait:等待机制;notify:锁机制;Thread.sleep(100);线程阻塞100毫秒<br>wait(锁里面的线程wait)，notify(随机唤醒一个用到当前对象的线程)和notifyAll(唤醒所有当前对象上的线程)只能在同步控制方法或者同步控制块里面使用，而sleep可以在任何地方使用;sleep是线程类（Thread）的方法，wait是Object类的方法;<br>BlockingQueue内部使用两条队列,允许两个线程同时向队列一个做存储,一个做取出操作,保证并发安全同时提高效率<br>线程互斥是指对于共享的进程系统资源，在各单个线程访问时的排它性。当有若干个线程都要使用某一共享资源时，任何时刻最多只允许一个线程去使用，<br>其它要使用该资源的线程必须等待，直到占用资源者释放该资源。线程互斥可以看成是一种特殊的线程同步（下文统称为同步）。<br>线程同步是指线程之间所具有的一种制约关系，一个线程的执行依赖另一个线程的消息，当它没有得到另一个线程的消息时应等待，直到消息到达时才被唤醒。<br>线程池:ExecutorService threadPool = Executors.newFixedThreadPool(2);        线程池里能放2个线程<br>    threadPool.execute(t1);    将线程放入线程池执行,如果要放进去5个,则先执行前2个,再执行2个,再执行1个<br>死锁:产生条件(同步嵌套):1.互斥条件2.请求和保持条件3.不剥夺条件4.环路等待条件</p>
<h2 id="TCP通信"><a href="#TCP通信" class="headerlink" title="TCP通信:"></a>TCP通信:</h2><p>Socket(套接字):用于描述IP地址和端口,每个服务软件都打开了一个Socket,并绑定到一个端口上。Socket和ServerSocket(用于服务器)类位于java.net包<br>获取本地地址和端口号:int getLocalPort();String getHostAddress();InetAddress getLocalAddress();<br>获取网络输入输出流:<br>Socket相当于一个邮箱,pw.println();把信放到邮箱;br.readLine();从邮箱拿信;<br>使用Socket完毕后使用void close()方法关闭(会同时关闭输入输出流)</p>
<p>服务器端(Server):创建监听服务–&gt;等待连接—&gt;进行通讯—&gt;关闭连接<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Server</span>&#123;</div><div class="line">	<span class="keyword">private</span> ServerSocket server;</div><div class="line">	<span class="keyword">private</span> List&lt;PrintWriter&gt; allOut;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Server</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">		allOut = <span class="keyword">new</span> ArrayList&lt;PrintWriter&gt;();</div><div class="line">		server = <span class="keyword">new</span> ServerSocket(<span class="number">8088</span>);</div><div class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">		e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">private</span> synchronized <span class="keyword">void</span> <span class="title">addOut</span>(<span class="params">PrintWriter pw</span>)</span>&#123;</div><div class="line">		allOut.<span class="keyword">add</span>(pw);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">private</span> synchronized <span class="keyword">void</span> <span class="title">removeOut</span>(<span class="params">PrintWriter pw</span>)</span>&#123;</div><div class="line">		allOut.<span class="keyword">remove</span>(pw);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">private</span> synchronized <span class="keyword">void</span> <span class="title">sendMessageToAllClient</span>(<span class="params">String message</span>)</span>&#123;</div><div class="line">		<span class="keyword">for</span>(PrintWriter pw:allOut)&#123;</div><div class="line">			pw.println(message);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">			<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">				System.<span class="keyword">out</span>.println(<span class="string">"等待客户端连接...."</span>);</div><div class="line">				Socket socket = server.accept();</div><div class="line">				ClientHandle clientHandle = <span class="keyword">new</span> ClientHandle(socket);</div><div class="line">				Thread t = <span class="keyword">new</span> Thread(clientHandle);</div><div class="line">				t.start();</div><div class="line">			&#125;</div><div class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span>&#123;</div><div class="line">		Server server = <span class="keyword">new</span> Server();</div><div class="line">		server.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">class</span> <span class="title">ClientHandle</span> <span class="title">implements</span> <span class="title">Runnable</span>&#123;</div><div class="line">		<span class="keyword">private</span> Socket socket;</div><div class="line">		<span class="keyword">private</span> String host;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">ClientHandle</span>(<span class="params">Socket socket</span>)</span>&#123;</div><div class="line">			<span class="keyword">this</span>.socket=socket;</div><div class="line">			InetAddress address = socket.getInetAddress();</div><div class="line">			host = address.getHostAddress();</div><div class="line">			System.<span class="keyword">out</span>.println(host+<span class="string">"上线了"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			PrintWriter pw = <span class="literal">null</span>;</div><div class="line">			<span class="keyword">try</span>&#123;</div><div class="line">			OutputStream <span class="keyword">out</span> = socket.getOutputStream();</div><div class="line">			OutputStreamWriter osw = <span class="keyword">new</span> OutputStreamWriter(<span class="keyword">out</span>,<span class="string">"utf-8"</span>);</div><div class="line">			pw = <span class="keyword">new</span> PrintWriter(osw,<span class="literal">true</span>);</div><div class="line">			addOut(pw);</div><div class="line"></div><div class="line">			InputStream <span class="keyword">in</span> = socket.getInputStream();</div><div class="line">			InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(<span class="keyword">in</span>,<span class="string">"utf-8"</span>);</div><div class="line">			BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);</div><div class="line">			String s = <span class="literal">null</span>;</div><div class="line">			<span class="keyword">while</span>((s=br.readLine())!=<span class="literal">null</span>)&#123;</div><div class="line">				System.<span class="keyword">out</span>.println(host+<span class="string">"说:"</span>+s);</div><div class="line">			&#125;</div><div class="line"></div><div class="line">			&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;<span class="keyword">finally</span>&#123;</div><div class="line">				<span class="keyword">try</span>&#123;</div><div class="line">					removeOut(pw);</div><div class="line">					socket.close();</div><div class="line">					System.<span class="keyword">out</span>.println(host+<span class="string">"下线了！"</span>);</div><div class="line"></div><div class="line">				&#125;<span class="keyword">catch</span>(IOException e)&#123;</div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line"></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>客户端(Client):连接服务器–&gt;进行通讯–&gt;关闭连接<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Socket socket = <span class="keyword">new</span> <span class="type">Socket</span>();</div><div class="line">	<span class="keyword">public</span> Client()&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">			socket = <span class="keyword">new</span> <span class="type">Socket</span>(<span class="string">"127.0.0.1"</span>,<span class="number">8088</span>);</div><div class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> void start()&#123;</div><div class="line">		<span class="keyword">try</span>&#123;</div><div class="line">		ServerMessage message = <span class="keyword">new</span> <span class="type">ServerMessage</span>();</div><div class="line">		Thread t = <span class="keyword">new</span> <span class="type">Thread</span>(message);</div><div class="line">		t.start();</div><div class="line">		OutputStream out = socket.getOutputStream();</div><div class="line">		OutputStreamWriter osw = <span class="keyword">new</span> <span class="type">OutputStreamWriter</span>(out,<span class="string">"utf-8"</span>);</div><div class="line">		PrintWriter pw = <span class="keyword">new</span> <span class="type">PrintWriter</span>(osw,<span class="literal">true</span>);</div><div class="line">		pw.println(<span class="string">"服务端你好!"</span>);</div><div class="line">			Scanner sc = <span class="keyword">new</span> <span class="type">Scanner</span>(System.<span class="keyword">in</span>);</div><div class="line">			<span class="keyword">while</span>(<span class="literal">true</span>)&#123;</div><div class="line">			pw.println(sc.nextLine());</div><div class="line">			&#125;</div><div class="line">		&#125;<span class="keyword">catch</span>(Exception e)&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args)&#123;</div><div class="line">		Client client = <span class="keyword">new</span> <span class="type">Client</span>();</div><div class="line">		client.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerMessage</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Runnable</span></span></span>&#123;</div><div class="line">		<span class="keyword">public</span> void run()&#123;</div><div class="line">			<span class="keyword">try</span>&#123;</div><div class="line">				InputStream <span class="keyword">in</span> = socket.getInputStream();</div><div class="line">				InputStreamReader isr = <span class="keyword">new</span> <span class="type">InputStreamReader</span>(<span class="keyword">in</span>,<span class="string">"utf-8"</span>);</div><div class="line">				BufferedReader br = <span class="keyword">new</span> <span class="type">BufferedReader</span>(isr);</div><div class="line">				<span class="keyword">String</span> s = <span class="literal">null</span>;</div><div class="line">				<span class="keyword">while</span>((s=br.readLine())!=<span class="literal">null</span>)&#123;</div><div class="line">					System.out.println(<span class="string">"服务器说"</span>+s);</div><div class="line">				&#125;</div><div class="line">			&#125;<span class="keyword">catch</span>(IOException e)&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="枚举-enum"><a href="#枚举-enum" class="headerlink" title="枚举:enum;"></a>枚举:enum;</h2><p>枚举enum的方法,名字name(),排行ordinal() 0~n;将字符串变为对象valueOf(str);所有的方法要放在元素列表之后,元素列表后有东西,要加分号,构造方法要是私有的<br>元素后(比如SUN)加(参数)可以调用对应的构造方法;RED(30){}:相当于写了一个匿名内部类，调用了有参的构造方法;枚举只有一个成员时,就可以作为一种单例的实现方式<br><figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TrafficLamp&#123;</div><div class="line">	RED(<span class="number">30</span>)&#123;</div><div class="line">		<span class="keyword">public</span> <span class="function">TrafficLamp <span class="title">nextLamp</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> GREEN;</div><div class="line">		&#125;</div><div class="line">	&#125;,GREEN(<span class="number">45</span>)&#123;</div><div class="line">		<span class="keyword">public</span> <span class="function">TrafficLamp <span class="title">nextLamp</span><span class="params">()</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> YELLOW;</div><div class="line">		&#125;</div><div class="line">	&#125;,YELLOW(<span class="number">5</span>)&#123;</div><div class="line">		<span class="keyword">public</span> <span class="function">TrafficLamp <span class="title">nextLamp</span><span class="params">()</span></span>&#123;</div><div class="line">			<span class="keyword">return</span> RED;</div><div class="line">		&#125;</div><div class="line">	&#125;;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">abstract</span> <span class="function">TrafficLamp <span class="title">nextLamp</span><span class="params">()</span></span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">int</span> time;</div><div class="line">	<span class="function"><span class="keyword">private</span> <span class="title">TrafficLamp</span><span class="params">(<span class="keyword">int</span> time)</span></span>&#123;</div><div class="line">		<span class="keyword">this</span>.time=time;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库:"></a>数据库:</h1><p>DDL(number(p,s),char/varchar2):用于建立、修改、删除数据库对象<br>DML:操作<br>DQL:查询<br>TCL:<br>DCL:<br>Oracle默认大写<br>DDL:<br>创建表:create table emp(id number(5),name varchar2(30),salary number(8,2))charset utf8;<br>修改表:alter table emp add(email varchar2(30));<br>    alter table emp modify(email varchar2(20));<br>重命名表:rename emp to new_emp;<br>删除表:drop table emp;<br>删除序列:drop sequence seq;<br>删除列:alter table emp drop email;<br>DML:<br>插入新行:insert into emp (id,name,salary)values(1,‘张三’,3000);列名都不加默认所有<br>删除数据:delete from emp where id = 1;    不加条件删除所有<br>查找数据(select在Oracle中属于DML):select <em>from emp;    选出所有的数据<br>    select id,name ename from emp;    查看id,name列,并把输出的name列名改为ename<br>更新数据:update emp set name=’李斯’,salary=12000.0 where id=1;<br>rollback;回滚<br>commit;提交;    已commit的不能rollback;<br>desc emp;    查表结构<br>select str from dual;    dual:伪表<br>select str from emp;<br>str:<br>concat(char1,char2);    char1||char2||char3;    多个参数拼接<br>length(name);    name的长度<br>upper(‘hello’);    lower(‘hello’);    initcap(‘hello’);    大小写,首字母大写<br>trim(‘e’ from ‘elle’);    去两边指定字符    ltrim去所有左边;rtrim去所有右边<br>lpad(sal,10,’$’);把sal左边补$到10位,如果sal中位数超过10位,将右边的截掉<br>substr(‘thinking’,1,2);从角标1开始截两位(最多取到结尾)如果该值是-4,则倒数第四位开始取<br>instr(‘demowho’,’who’,5,2);在demowho中找who第二次出现角标,从第5个角标开始找,无则返回0,区分大小写<br>round(456.789,2);四舍五入保留2位,第二个参数为-1时,保留到十位;trunc(用法与round一致)直接截取<br>mod(sal,1000);    sal除以1000的值,当它的值为0时,返回的值为sal本身<br>ceil(456.789);    向上取整;    floor(456.789);    向下取整<br>to_date(‘2008年08月08日’,’YYYY”年”MM”月”DD”日”‘);    将字符串转换为日期格式<br>to_char(sysdate,’YYYY-MM-DD HH:MM:SS’);    将日期转换成字符串,sysdate为当前时间<br>last_day(sysdate);返回这个月的最后一天<br>add_months(date,i);    date加上i个月之后<br>months_between(date1,date2);两个月之间隔,有小数<br>next_day(date,char);    返回date日期数据的下一个周几,char=1为周日<br>nvl(a1,a2);    当a1为null时,返回a2的值否则返回a1;(将一个null值替换为非null值)<br>nvl2(a1,a2,a3);    当a1不为null时,函数返回a2,否则返回a3;<br>ename as “姓名”;    列加别名,as可省略<br>max(id):id最大值;min(id):id最小值;avg(sal):sal的平均值;sum(sal):sal的和值;<br>count(</em>):查看有几条记录<br>decode(1,2,3,4,5,6);1等于2返回3,否则等于4返回5….否则返回6;<br>case 1 when 2 then 3 when 4 then 5… else 6 end;<br>select name from emp where A str B;<br><figure class="highlight ada"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;,&lt;,&gt;=,&lt;=,!=,&lt;&gt;,=;!=等价于&lt;&gt;;<span class="keyword">and</span> <span class="keyword">or</span> ;<span class="keyword">and</span>的优先级高于<span class="keyword">or</span>;</div></pre></td></tr></table></figure></p>
<p>name like ‘<em>A%’;    like(模糊查询)%表示0到多个字符;    </em>:标识单个字符<br>in(‘a’,’b’);    in:等于列表中的其中之一即可    not in:不在列表范围内<br>between    A and B;    在A~B之间(包含两端)<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;<span class="built_in">any</span>:大于最小	&gt;<span class="built_in">all</span>:大于最大	&lt;<span class="built_in">any</span>:小于最大	&lt;<span class="built_in">all</span>:小于最小</div></pre></td></tr></table></figure></p>
<p>select distinct job from emp;    distinct关键字,用于去除结果中的重复,必须紧跟在select后面<br>select name,id from emp order by id ASC,name DESC;    order by:排序;ASC:正序;DESC:倒序;<br>select avg(sal) from emp group by deptno,class having max(sal)&gt;4000;    group by A,B:两个字段相同的看成一组;having必须跟在group by 后<br>from:执行顺序从后往前,从右到左<br>where:执行顺序从右到左；自上而下<br>group by:从左往右分组<br>where在group by前执行,having在group by 后执行<br>关联查询:关联查询必须要写链接条件,N张表进行链接查询,至少要有N-1个链接条件<br>select a.name,b.name from emp1 a,emp2 b where a.id = b.id;<br>外链接<br>自连接<br>子查询:通常是为了外层SQL提供数据支持的。嵌入在其他SQL语句中的查询语句<br>分页查询:pagesize:每页的条数;page:第几页;min:(page-1)<em>pagesize+1;max:page</em>pagesize;select rownum from emp<br>序列:用来生成唯一数字值的数据库对象<br>create sequence emp start with 1 increment by 1;<br>emp.nextval:获取序列的下个值;    emp.currval:获取序列的当前值<br>约束:not null(不为空);unique(唯一性约束);primary key(主键约束,唯一标识一行);<br>null与字符串拼接等于什么都没干;null与数字运算结果为null;</p>
<h1 id="JDBC-Java-Datebase-Connectivity"><a href="#JDBC-Java-Datebase-Connectivity" class="headerlink" title="JDBC(Java Datebase Connectivity)"></a>JDBC(Java Datebase Connectivity)</h1><p>JDBC工作过程:<br>加载驱动,建立连接;创建语句对象;执行SQL语句;处理结果集;关闭连接<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>.<span class="keyword">Class</span>.forName(<span class="string">"oracle.jdbc.driver.OracleDriver"</span>);</div><div class="line"><span class="number">2</span>.Connection conn = <span class="keyword">null</span>; conn = DriverManager.getConnection(<span class="string">"jdbc:oracle:thin:@192.168.0.23:1521:tarena"</span>,<span class="string">"hdsd0702"</span>,<span class="string">"hdsd0702"</span>);</div><div class="line"><span class="number">3</span>.Statement state = conn.createStatement();</div><div class="line"><span class="comment">//	String sql = "insert into userinfo (id,uasename,password,email,account)values (emp.nextval,?,?,?,?)";	PreparedStatement 是 Statement的子类</span></div><div class="line"><span class="comment">//	PreparedStatement ps = conn.prepareStatement(sql);ps.setString(1,"test");ps.executeUpdate();	//(主要用于所有的SQL语句)</span></div><div class="line"><span class="number">4</span>.ResultSet rs = state.executeQuery(sql);	<span class="comment">//sql为String类型,是SQL语句</span></div><div class="line"><span class="comment">//获取结果集元素</span></div><div class="line"><span class="keyword">while</span>(rs.<span class="keyword">next</span>())&#123;		</div><div class="line">	String name = rs.getString(<span class="string">"name"</span>);</div><div class="line">	<span class="keyword">int</span> id = rs.getInt(<span class="string">"id"</span>);</div><div class="line">&#125;						</div><div class="line"></div><div class="line">ResultSetMetaData rsmd=rs.getMetadata();	<span class="comment">//获取结果集元数据</span></div><div class="line"><span class="keyword">int</span> <span class="keyword">count</span> = rsmd.getColumnCount();</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="keyword">count</span>;i++)&#123;</div><div class="line">	colName=rsmd.getColumnName(i);		<span class="comment">//获取的字段</span></div><div class="line">	String str = rs.getString(colName);	<span class="comment">//由获取的字段得到结果集数据</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Statement的方法:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ResultSet executeQuery(String sql);	//该方法专门用来执行DQL语句,返回的ResultSet表示查询出来的结果集(主要用于<span class="keyword">select</span>)</div><div class="line"><span class="built_in">int</span> executeUpdate(<span class="keyword">String</span> <span class="keyword">sql</span>);		//该方法专门用来执行DML语句,返回的ResultSet表示查询出来的结果集(主要用于<span class="keyword">insert</span>,<span class="keyword">delete</span>,<span class="keyword">update</span>)</div><div class="line"><span class="built_in">boolean</span> <span class="keyword">execute</span>(<span class="keyword">String</span> <span class="keyword">sql</span>);		//通常用来执行DDL,存在结果集,则返回true(主要用于<span class="keyword">create</span>/<span class="keyword">drop</span>/<span class="keyword">alter</span>)</div></pre></td></tr></table></figure></p>
<p>事务:操作在Connection中,默认为自动提交事务<br>conn.setAutoCommit(false);将自动提交关闭(事务)<br>conn.commit();提交事务;        conn.rollback();回滚事务,已提交的不能rollback<br>state.addBatch(sql);    将SQL添加到批中,等待一起发送,提高网络效率,一般只执行DML操作,返回值为int影响了几条数据<br>配置文件:<br>InputStream ips = ReflectTest2.class.getClassLoader().getResourceAsStream(“BeanUtils/config.properties”);    通过得到class文件的地址得到要找的资源<br>配置文件放在classpath的目录下,通过类加载器的方法加载配置文件,配置文件在该包下可以直接用config.properties,如果在该包的子包内resources/config.properties;<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Properties prop = new Properties()<span class="comment">;  //和Map类类似,Properties多了一个从本地读取的功能；</span></div><div class="line">prop.load(new FileInputStream(<span class="string">"config.properties"</span>))<span class="comment">;	得到prop的配置项</span></div><div class="line">String str = prop.getProperty(<span class="string">"url"</span>)<span class="comment">;	根据key(name)获取value,赋给str</span></div><div class="line">DBCP(DateBaseConnectionPool)连接池:</div><div class="line">private static <span class="keyword">BasicDataSource </span>cp = new <span class="keyword">BasicDataSource();</span></div><div class="line">cp.setDriverClassName(driverName)<span class="comment">;</span></div><div class="line">cp.setUrl(url)<span class="comment">;</span></div><div class="line">cp.setUsername(username)<span class="comment">;</span></div><div class="line">cp.setPassword(password)<span class="comment">;</span></div><div class="line">cp.setMaxActive(maxactive)<span class="comment">;	最大连接数</span></div><div class="line">cp.setMaxWait(maxwait)<span class="comment">;		最大等待时间</span></div></pre></td></tr></table></figure></p>
<h1 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h1><p>HTML:用HTML编写的文件,以.html或html为后缀<br>HTML5：是最宽松的版本,不用严格遵守XML语法,已经简化为&lt;!DOCTYPE html&gt;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">title</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span>&gt;</span>	//改编码</div><div class="line">	<span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">			<span class="selector-id">#body1</span> <span class="selector-tag">th</span>&#123;<span class="attribute">border-bottom</span>:<span class="number">1px</span> solid <span class="number">#848484</span>;&#125;</div><div class="line">	<span class="tag">&lt;/<span class="name">style</span>&gt;</span>	//设置样式</div><div class="line">	//类型为javascript,用javascript语言写(js脚本)</div><div class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">link</span>&gt;</span><span class="tag">&lt;/<span class="name">link</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>	//块分区元素</div><div class="line">	//标题元素h1~h6;<span class="tag">&lt;<span class="name">p</span>&gt;</span>段落元素</div><div class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>行内分区元素&amp;lt;&amp;gt;(<span class="tag">&lt;&gt;</span>)&amp;nbsp;(/s)&amp;copy;(@)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"images/img.png"</span>/&gt;</span>	//加图片</div><div class="line">		//target="_blank"转到一个新开网页,不加就在原网页转</div><div class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://tmooc.cn"</span> <span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#s1"</span>&gt;</span>第一章<span class="tag">&lt;/<span class="name">a</span>&gt;</span>	//锚点,#代表返回到顶部</div><div class="line">	<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">"2"</span> <span class="attr">rowspan</span>=<span class="string">"2"</span>&gt;</span>表格单元<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">thead</span>&gt;</span><span class="tag">&lt;/<span class="name">thead</span>&gt;</span><span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span><span class="tag">&lt;<span class="name">tfoot</span>&gt;</span><span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">ol</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ol</span>&gt;</span>	//有序列表<span class="tag">&lt;<span class="name">ol</span>&gt;</span>;无序列表<span class="tag">&lt;<span class="name">ul</span>&gt;</span>;列表项<span class="tag">&lt;<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h1><p>CSS样式表:内联样式,内部样式,外部样式表;<br>特征:<br>继承性:大多数CSS的样式规则可以被继承<br>层叠性:可以定义多个样式表,不冲突时,多个样式表中的样式可层叠为一个<br>优先级:样式定义冲突时,按照不同样式规则的优先级来应用样式,相同的样式,如果重复定义,<br>以最后一次的定义为准(就近原则)<br>width和height指内容区域(element)的宽度和高度,增加padding和margin不会影响element尺寸,但会增加元素框总尺寸<br>元素选择器(div),id选择器(#id),类选择器(.class)<br>padding:内边距,border:边框,margin:外边距<br>CSS(Cascading Style Sheets)<br>外部样式:.css文件<br>{background-color:silver;background:red;<br>border-top/right/bottom/left:1px solid black(width style color);border-width/style/color:10px;<br>padding-top/right/bottom/left:10px;    padding(margin):1px(top) 1px(right) 1px(bottom) 1px(left)(顺时针);<br>margin:0 auto(设置居中);background-image:url(“image/img1.jpg”);<br>background-repeat:repeat/repeat-x(水平重复)/repeat-y/(垂直重复)no-repeat(显示一次);<br>background-position:x% y%/x y/left/center/right/top/bottom;font-family:value1,value2(指定字体);font-size:1.2em;font-size:10pt;<br>font-size:35pt;font-weight:normal/bold;color:#ff0000(文本颜色);text-align:center/left/right(文本排列);<br>text-decoration:none/underline(文字修饰);line-height:25px(字体垂直居中用);text-indent:20px(首行文本缩进);<br>vertical-align:top/middle/bottom(表单垂直对其方式);border-collapse:separate/collapse(表单边框合并);<br>border-spacing:10px 20px(边框边距);float:none/left/right(div浮动);clear:none/left/right/both(元素哪边不允许出现浮动元素);<br>display:none/block/inline;cursor:default/pointer/crosshair/text/wait/help(光标属性);<br>(列表项标志)list-style-type:(无序列表)none(无标记)/disc(实心圆)/circle(空心圆)/square(实心方块)/<br>(有序列表)none(无标记)/decimal(数字)/lower-roman(小写罗马数字)/upper-roman(大写罗马数字);<br>list-style-image:url(img.jpg)(图像代表列表项标记);position:static/relative/absolute/fixed(定位);top/bottom/left/right:1px;<br>z-index:2(堆叠顺序,数值越大,在越上面);<br>}<br>伪类选择器:用于向某些选择器添加特殊的效果,使用冒号(:)作为结合符,结合符左边是其他选择器,右边是伪类<br>常用伪类:link,active,visited,hover,focus;    #d1:hover{}<br>overflow:当内容溢出元素框时如何处理<br>{overflow:hidden(隐藏文本不显示);scroll(显示滚动条);auto(不超出不显示,超出显示滚动条)}</p>
<h1 id="JS"><a href="#JS" class="headerlink" title="JS"></a>JS</h1><p>JS(JavaScript):核心思想:一切都是对象<br>在浏览器运行的客户端语言,大小写敏感,一般使用分号结束,换行也行<br>所有的变量都用关键字var声明<br>注释:    单行://        多行:/<em>    </em>/<br>boolean isNaN();不是一个数字<br>==只要值相等    ===不但值相等,类型也要相等 !==值不相等或者类型不相等<br>超链接在新窗口中打开,可重复:<a href="#" onclick="window.open('URL')">跳转超链接</a><br>超链接在新窗口中打开,不可重复:<a href="#" onclick="window.open('URL'.'name')">跳转超链接</a><br>数组排序:array.sort(compare);<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span><span class="function"><span class="keyword">function</span> <span class="title">compare</span><span class="params">(a,b)</span></span>&#123;<span class="keyword">return</span> a-b;&#125;</div><div class="line"><span class="number">2.</span><span class="keyword">var</span> compare=<span class="function"><span class="keyword">function</span><span class="params">(a,b)</span></span>&#123;<span class="keyword">return</span> a-b;&#125;;</div><div class="line"><span class="number">3.</span><span class="keyword">var</span> compare=<span class="keyword">new</span> <span class="function"><span class="keyword">Function</span><span class="params">(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"return a-b;"</span>)</span></span>;</div></pre></td></tr></table></figure></p>
<p>html调用js：<br>1.js插入html页面:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;input <span class="attribute">type</span>=<span class="string">"button"</span> <span class="attribute">onclick</span>=<span class="string">"alert('HelloWorld');"</span>&gt;</div></pre></td></tr></table></figure></p>
<p>2.嵌入式:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">language</span>=<span class="string">"javascript"</span>&gt;</span><span class="actionscript"></span></div><div class="line">alert(<span class="string">"HelloWorld"</span>);	</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>3.文件调用方式:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">tyle</span>=<span class="string">"text/javascript"</span> <span class="attr">language</span>=<span class="string">"javascript"</span> <span class="attr">src</span>=<span class="string">"myjs.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>html页面可以调用myjs里面的方法<br>数据类型的隐式转换:<br>数字+字符串:数字转换成字符串<br>数字+布尔值:true转换为1,false转换为0<br>字符串+布尔值:布尔值转换为字符串true或false<br>布尔值+布尔值:布尔值转换为数值1或0<br>数据类型转换函数:toString;parseInt(“6.12”);parseFloat;如果不能转换,则返回NaN(not a number)<br>null:可以通过给变量赋值null来清除变量的内容<br>undefined:声明了变量但从未赋值或变量属性不存在<br>==数值相等;===类型相等,数值相等<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">str</span>.length;<span class="keyword">str</span>.toLowerCase;<span class="keyword">str</span>.toUpperCase;<span class="keyword">str</span>.charAt(<span class="keyword">index</span>);<span class="keyword">str</span>.split(<span class="string">","</span>);</div><div class="line"><span class="keyword">str</span>.charCodeAt(<span class="keyword">index</span>);				<span class="comment">//返回指定位置字符的Unicode编码</span></div><div class="line"><span class="keyword">str</span>.indexOf(findstr,<span class="keyword">index</span>);			<span class="comment">//index为开始查找的位置索引,可以省略	</span></div><div class="line"><span class="keyword">str</span>.lastIndexOf(findstr,<span class="keyword">index</span>);</div><div class="line"><span class="keyword">str</span>.substring(start,end);			<span class="comment">//截取子字符串,包头不包尾</span></div><div class="line"><span class="keyword">str</span>.replace(findstr,tostr);			<span class="comment">//替换子字符串</span></div><div class="line"><span class="keyword">str</span>.match(regexp);				<span class="comment">//返回匹配字符串的数组</span></div><div class="line"><span class="keyword">str</span>.search(regexp);				<span class="comment">//返回匹配字符串的首字符位置索引</span></div><div class="line">var strArray = <span class="keyword">str</span>.split(bystr,howmany);	<span class="comment">//返回分割后的字符串数组,howmany是返回数组最大长度可以省略</span></div></pre></td></tr></table></figure></p>
<p>Array:<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">var</span> week = <span class="built_in">new</span> Array(<span class="number">7</span>);	</div><div class="line"><span class="built_in">var</span> test = <span class="built_in">new</span> Array(<span class="number">100</span>,<span class="string">"dhsj"</span>,<span class="literal">true</span>);	</div><div class="line"><span class="built_in">var</span> test1 = [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>];</div><div class="line">week.<span class="built_in">length</span>;	</div><div class="line">arr.<span class="built_in">join</span>(<span class="string">"-"</span>);</div><div class="line">arr.toString();</div><div class="line">arr.<span class="built_in">reverse</span>();</div><div class="line">arr.slice(start,[end]);	//获取子数组</div><div class="line">data.toFixed(<span class="built_in">num</span>);	//数值转换为字符串,并保留小数点后<span class="built_in">num</span>位</div></pre></td></tr></table></figure></p>
<p>正则表达式:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> regExp = <span class="regexp">/pattern/</span>flags;</div><div class="line"><span class="comment">//flags:g:设定当前匹配为全局模式;i:忽略匹配中的大小写检测;m:多行搜索模式</span></div><div class="line"><span class="keyword">var</span> regExp = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"pattern"</span>,[<span class="string">"flags"</span>]);</div><div class="line"><span class="keyword">var</span> isRight = reg.test(str);	<span class="comment">//检索str中指定的值返回true或false</span></div></pre></td></tr></table></figure></p>
<p>Date对象:<br><figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> now = <span class="function"><span class="keyword">new</span> <span class="title">Date</span>();	</span></div><div class="line"><span class="title">var</span> <span class="title">now2</span> = <span class="title">new</span> <span class="title">Date</span>("<span class="number">2013</span>/<span class="number">3</span>/<span class="number">20</span> <span class="number">11</span>:<span class="number">20</span>");</div><div class="line"><span class="title">getDate</span>();</div><div class="line"><span class="title">getFullYear</span>();</div><div class="line"><span class="title">setDate</span>();</div><div class="line"><span class="title">setDay</span>();</div><div class="line"><span class="title">setFullYear</span>();</div><div class="line"><span class="title">toString</span>();</div><div class="line"><span class="title">toLocaleTimeString</span>();</div><div class="line"><span class="title">toLocaleDateString</span>();</div><div class="line"><span class="title">getDay</span>();<span class="comment">//星期中的某一天，返回值为0(日)-6(六)</span></div></pre></td></tr></table></figure></p>
<p>函数:function func(){}<br>arguments:函数的参数数组    arguments.length:函数的参数个数        arguments[i]:第i个参数<br>Function对象:new Function(arg1,arg2,..,functionBody);<br>匿名函数:var func = function(arg1,arg2,…){func_body;};<br>eval(字符串计算):var str = “2+3”;    eval(str);//5<br>Math.random();    //[0,1)<br>window.location.href=”<a href="https://www.baidu.com" target="_blank" rel="external">https://www.baidu.com</a>“;  当前窗口打开窗口<br>window.open(“<a href="https://www.baidu.com" target="_blank" rel="external">https://www.baidu.com</a>“);    新开窗口打开窗口;    window.close();关闭当前窗口<br>2个return:onclick=”return method27();”        var result = confirm(“您确定要删除吗?”);return result;<br>encodeURI:把字符串作为URI进行编码    var r1 = encodeURI(str);<br>decodeURI:对encodeURI()函数编码        var r2 = decodeURI(r1);<br>eval函数:用于计算某个字符串,以得到结果;或用于执行其中的JavaScript代码<br>函数触发动作:onmouseover,onmouseout,onclick,onfocus,onblur,onchange<br>定时器:<br>周期性:window.setInterval(func,1000);    func:函数,执行语句;1000:时间周期,单位为毫秒;返回已经启动的定时器对象<br>window.clearInterval(tID):停止启动的定时器<br>一次性:window.setTimeout(func,1000);window.clearTimeout(tID);</p>
<h1 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h1><p>DOM节点树:一切皆节点;var obj = document.getElementById(“d1”);<br>obj.nodeName;obj.nodeType;节点名称:nodeName;节点类型:nodeType;obj.innerText;obj.innerHTML;<br>obj.getAttribute(“name”);根据属性名称获取属性值obj.setAttribute(‘class’,’active’);obj.removeAttribute(“name”);<br>obj.src=”clock.jpg”;(将HTML标记,属性和CSS样式都对象化)obj.style.color=”red”;obj.style.fontSize = 20;<br>innerText:设置或获取位于对象起始和结束标签内的文本<br>innerHTML:设置或获取位于对象起始和结束标签内的HTML    obj.innerHTML=”new text”;<br>页面加载时调用方法:<body onload="method();"><br>页面加载后启动:window.addEventListener(‘load’,timestart(函数名),false);<br>每个载入浏览器的HTML文档都会成为document对象,通过使用document对象,可以<br>从脚本中对HTML页面中的所有元素进行访问<br>标准DOM实现:var newNode = document.createElement(“img”);<br>HTML DOM实现(提供了封装好的对象):var newNode = new Image();Select,Option<br>var o = new Option(text,value);<br>Table对象:table.rows/cells.length;table.insertRow(index);返回Table对象table.deleteRow(index);<br>TableRow对象:table.rows[0].cells.length;table.rows[0].rowIndex/cells[0]/innerHTML/insertCell(index)/deleteCell(index);<br>TableCell对象:table.rows[0].cells[0].innerHTML/colSpan/rowSpan/cellIndex;<br>screen对象:<br>history对象:history.forward();前进按钮history.back();后退按钮history.go(-2);后退2次按钮<br>location对象:location.reload();location.href=”<a href="https://www.baidu.com&quot;;location.replace(&quot;https://www.baidu.com" target="_blank" rel="external">https://www.baidu.com&quot;;location.replace(&quot;https://www.baidu.com</a>“);<br>DOM操作-查询:查询节点:<br>通过id查询:document.getElementById(“d1”);<br>通过层次(节点关系)查询:obj.firstChild;obj.lastChild;obj.previousSibling;obj.nextSibling;同级前后节点<br>obj.parentNode;obj.childNodes;查找多个节点,数组<br>通过标签名称查询:var pNodes = document(obj).getElementsByTagName(“p”);数组;pNodes[1].innerHTML;<br>通过name属性查询:<br>创建新节点:var newNode = document.createElement(“p”);返回新创建的节点<br>添加新节点:parentNode.appendChild(newNode);    新节点作为父节点的最后一个子节点存在<br>       parentNode.insertBefore(newNode,refNode);    新节点位于refNode之前<br>删除节点:node.removeChild(childNode);删除某个节点,childNode必须是node的子节点<br>childNode.parentNode.removeChild(childNode);    删除自身<br>js代码中动态事件:btnObj.onclick = method;<br>事件:事件出发后将会产生一个event对象<br>鼠标事件:onclick/ondblclick/onmousedown/onmouseup/onmouseover/onmouseout/onmousemove(事件中实现显示坐标) = “method();”;<br>键盘事件:onkeydown/onkeyup<br>状态事件:onload/onunload/onchange/onfocus/onblur/onresize/onsubmit<br>取消事件:onXXX = “return false;”;<br>事件冒泡取消:event.cancelBubble = true;(js代码中不能直接使用event关键字，func(event))</body></p>
<h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><p>两层CS架构:客户端+DB    数据库作为Server移植性差,不适合大型引用<br>三层CS架构:客户端+应用服务器+DB        移植性好,适合大型引用,但是客户端需要单独安装<br>BS架构:Browser+WebServer+DB    数据库只负责数据管理,web服务器负责业务逻辑处理,浏览器负责提供操作页面<br>Servlet:server+let;服务器端的小程序,Sevlet是容器的一部分;sun公司制定的一种用来扩展Web服务器功能的组件规范<br>容器:符合一定规范,提供组件运行环境的一个程序<br>200表示请求成功202表示请求被接受但处理未完成400错误的请求<br>404错误:web服务器(容器)根据请求地址找不到对应资源<br>405错误:web服务器找不到servlet()方法处理请求(service方法名称写错等)<br>500错误:程序在运行过程出错<br>HTTP协议:w3c制定的一种应用层协议,一次请求一次连接<br>请求数据包:请求行,消息头,实体内容;响应数据包:状态行,消息头,实体内容<br>HttpServletRequest(客户端请求):读取和写入请求数据,取得和设置cookie,实现请求转发<br>HttpServletResponse:设置cookie,实现重定向<br>Servlet获取请求参数值(Name-Value(s))的方法:<br>String request.getParameter(String Name);    String[] request.getParameterValues(String Name);(参数名相同多个参数值)<br>get请求:当需要向服务器请求指定的资源时使用的方法,不适用于提交请求(表单参数值在请求资源路径后面)<br>post请求:向服务器提交需要处理的数据,设置表单属性为post,可提交大量数据,不会将请求参数显示在浏览器地址栏(参数值在实体内容中)；<br>解决post方式下乱码:(页面–&gt;服务器)<br>1.表单所在页面按照指定字符集打开:<meta http-equiv="content-type" content="text/html;charset=utf-8"><br>2.服务器端指定编码解码:request.setCharacterEncoding(“utf-8”);<br>解决get方式下乱码:(服务器–&gt;页面)<br>1.表单所在页面按照指定字符集打开:<meta http-equiv="content-type" content="text/html;charset=utf-8"><br>2.服务器端获取参数:String username = request.getParameter(Name);username = new String(username.getBytes(“iso-8859-1”),”utf-8”);iso-8859-1–&gt;utf-8<br>解决输出内容(out.println();)乱码:response.setContentType(“text/html;charset=uft-8”);<br>编写Servlet的步骤:<br>1.创建web project<br>2.编写一个类,继承自HttpServlet<br>3.重写service()方法,编写输出内容<br>4.配置web.xml文件<br>5.部署该工程到tomcat中<br>6.启动tomcat<br>7.打开浏览器,输入 <a href="http://localhost:8080/应用名/地址" target="_blank" rel="external">http://localhost:8080/应用名/地址</a><br>打开web项目下的WebRoot下的html文件:<a href="http://localhost:8080/应用名/demo.html" target="_blank" rel="external">http://localhost:8080/应用名/demo.html</a>    请求资源路径:应用名(appName)/demo.html<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">GetPost</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="keyword">protected</span> void service(<span class="type">HttpServletRequest</span> req,<span class="type">HttpServletResponse</span> resp)</div><div class="line">	<span class="keyword">throws</span> <span class="type">ServletException</span>,<span class="type">IOException</span>&#123;</div><div class="line">		<span class="comment">//解决post乱码:</span></div><div class="line">		req.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">		<span class="comment">//解决输出内容乱码:</span></div><div class="line">		resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">		<span class="type">PrintWriter</span> out = resp.getWriter();</div><div class="line">		<span class="type">String</span> text = req.getParameter(<span class="string">"text"</span>);</div><div class="line">		out.println(<span class="string">"&lt;h1&gt;"</span>+text+<span class="string">","</span>+select+<span class="string">"&lt;/h1&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>或者:New–&gt;Servlet–&gt;doGet–&gt;next–&gt;URL:<em>.do–&gt;Finish–&gt;doGet改为service,删除不需要部分<br>重定向:服务器向浏览器发送302状态码,Location消息头(重定向地址);response.sendRedirect(“list”);list为应用名之后的路径<br>重定向的地址是任意的,重定向后浏览器地址栏的地址会发生改变<br>转发:Servlet/JSP–&gt;Servlet/JSP(一次请求一次响应,每次的request都不同，所以request.setAttribute只有一次效果)<br>转发的实现:1.绑定数据到reques对象;2.获得转发器;3.转发<br>1.实现绑定:request.setAttribute(String name,Object obj);name:绑定名;obj:绑定值;<br>2.获得转发器:RequestDispatchar rd = request.getRequestDispatchar(String path);    3.实现转发:rd.forward(request,response);<br>读取绑定:Object request.getAttribute(String name);<br>转发后地址栏地址不发生改变,转发过程在服务器内部,path必须是引用内部的某个地址,forward后的其他语句会执行<br>转发共享数据,重定向不共享数据<br>编程时的异常处理:利用转发跳转到指定页面;<br>通配符匹配:使用”</em>“匹配0个或多个字符(前面要加斜杠);前面不能使用斜杠,*.do匹配所有以.do结尾的请求<br>获取请求资源路径:String uri = request.getRequestURI();String action = uri.substring(uri.lastIndexOf(“/“)+1,uri.lastIndexOf(“.”));<br>action–&gt;service/service.impl–&gt;dao/dao.impl–&gt;jdbc–&gt;entity<br>Servlet线程安全:<br>ServletContext(Servlet上下文,一个Servlet程序只有一个):相当于Servlet中静态变量,因为Servlet创建后，服务器关闭才销毁<br>ServletContext sct =session.getServletContext();sct.setAttribute(“count”,count);</p>
<h1 id="JSP-不需要经过部署"><a href="#JSP-不需要经过部署" class="headerlink" title="JSP(不需要经过部署):"></a>JSP(不需要经过部署):</h1><p>JSP九大内置对象:request,response,session,application(Servlet上下文),out,pageContext,config,cookie,exception<br>Sun公司制定的一种服务器端动态页面技术的组件规范。JSP文件会被容器转换成一个Servlet类;避免Servlet大量输出out.print<br>JSP文件中可以包含以下内容:HTML(Css,Js),注释(<!-- -->,&lt;%– –%&gt;),<br>Java代码:JSP表达式:&lt;%=  %&gt;;</p><p>平方根是&lt;%=Math.sqrt(5) %&gt;</p>;JSP小脚本(写java代码片段的):&lt;%  %&gt;;JSP声明(成员属性或成员方法的声明):&lt;%!  %&gt;;<br>指令:<br>page指令(用于导包,设置页面属性):&lt;%@ page import=”java.util.*”(导包) pageEncoding=”utf-8”(容器读取文件时的解码) %&gt;<br>&lt;%@ page contentType=”text/html;charset=utf-8”%&gt;客户端解码<br>include指令(将其他文件包含进来):&lt;%@ include file=”url” %&gt;&lt;%@ include file=”header.html” %&gt;<br>隐含对象:request,response,out,session,application,pageContext,page,config,exception<br>创建静态JSP模板:JSP页面–&gt;Preferences–&gt;JSP Template–&gt;New–&gt;Name(随意)Context(jsp_new)Pattern(模板内容)<br>绝对路径以/开头,从应用名之后开始,相对路径从当前文件开始。String request.getContextPath();获取引用的部署名称<p></p>
<h1 id="Cookie-客户端状态管理技术"><a href="#Cookie-客户端状态管理技术" class="headerlink" title="Cookie(客户端状态管理技术)"></a>Cookie(客户端状态管理技术)</h1><p>一次请求一次响应,判断是否为同一用户操作<br>创建Cookie:Cookie c = new Cookie(String name,String value);response.addCookie(c);<br>查询Cookie:Cookie[] request.getCookies();    String Cookie.getName()/getValue();<br>修改Cookie:c.setValue(String newValue);–&gt;response.addCookie(c);同名Cookie覆盖<br>Cookie生存时间:void Cookie.setMaxAge(int seconds);seconds&gt;0:保存指定时间;seconds=0:删除Cookie;seconds&lt;0:Cookie保存到内存<br>Cookie编码:Cookie只能保存合法的ASCII字符,Cookie c = new Cookie(“city”,URLEncoder.encode(“北京”,”utf-8”));<br>Cookie解码:String value = c.getValue();value=URLDecoder.decode(value,”utf-8”);<br>Cookie路径:/appName/file/addCookie.jsp添加了一个Cookie,该Cookie的路径为/appName/file;c.setPath(“/appName”);response.addCookie(c);<br>客户端每次访问服务器(Servlet/JSP)都会把对应(根据路径)Cookie发送到服务器<br>发送Cookie的条件:要访问的地址必须是Cookie的路径或者子路径时,浏览器才会发送Cookie<br>Cookie可以被用户禁止,将状态保存在浏览器端不安全,敏感数据需要先加密,只能保存4kb左右,个数有限,只能保存字符串</p>
<h1 id="Session-服务器状态管理技术"><a href="#Session-服务器状态管理技术" class="headerlink" title="Session(服务器状态管理技术):"></a>Session(服务器状态管理技术):</h1><p>服务器为每个浏览器创建Session对象，将SessionId(使用Cookie的方式)发送给浏览器,Session能够保存多种数据类型,安全,但占服务器内存<br>浏览器再次访问时会将SessionId发给服务器,服务器找到相应Session<br>获得Session:HttpSession s = request.getSession(boolean flag);HttpSession s = request.getSession();flag不写默认true;<br>flag为true时,一定得到一个Session对象(请求中有SessionId–&gt;有对应Session–&gt;get;else new)<br>flag为false:请求中有SessionId–&gt;有对应Session–&gt;get;else return null;<br>使用Session绑定对象:void s.setAttribute(String name,Object obj);<br>获取绑定对象:Object s.getAttribute(String name);<br>移除绑定对象:void s.removeAttribute(String name);<br>删除Session对象:s.invalidate();<br>Session验证:常用于登录验证(获取绑定对象,如果没有跳转回登录页面)<br>Session超时:Web服务器会将空闲时间过长的Session对象删除掉,缺省的超时时间一般为30分钟<br>修改Session的缺省时间限制:void s.setMaxInactiveInterval(int seconds);<br>或者修改tomcat中的conf/web.xml文件的设置<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>如果Cookie被浏览器禁用,就不能使用Session了(可以使用如URL重写的方式来发送SessionId)<br>URL重写:URL=response.encodeURL(String url)(链接地址和表单的提交);URL=response.encodeRedirectURL(String url)(重定向);<br>验证码:<br>JSP Session验证:<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;%</div><div class="line">	<span class="built_in">Object</span> uname = session.getAttribute(<span class="string">"uname"</span>);</div><div class="line">		<span class="keyword">if</span>(uname==<span class="keyword">null</span>)&#123;</div><div class="line">			response.sendRedirect(<span class="string">"login.jsp"</span>);</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">%&gt;</div></pre></td></tr></table></figure></p>
<h1 id="过滤器监听器"><a href="#过滤器监听器" class="headerlink" title="过滤器监听器"></a>过滤器监听器</h1><p>过滤器:小型,可插入的Web组件,用来拦截Servlet容器的请求和响应过程<br>编写过滤器:<br>1.编写一个Java类,实现Filter接口<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CommentFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> String illegalWord;</div><div class="line">	<span class="comment">//容器删除过滤器之前调用,只执行一次</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span>&#123;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request,ServletResponse response,FilterChain chain)</span><span class="keyword">throws</span> IOException,ServletException</span>&#123;</div><div class="line">		HttpServletRequest req = (HttpServletRequest)request;</div><div class="line">		HttpServletResponse resp = (HttpServletResponse)response;</div><div class="line">		req.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">		resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">		PrintWrite out = resp.getWriter();</div><div class="line">		String comment = req.getParameter(<span class="string">"comment"</span>);</div><div class="line">		<span class="keyword">if</span>(comment.indexOf(<span class="string">"damn"</span>)!=-<span class="number">1</span>)&#123;</div><div class="line">			out.print(<span class="string">"&lt;h3&gt;评论内容关闭&lt;/h3&gt;"</span>);</div><div class="line">		&#125;<span class="keyword">else</span>&#123;</div><div class="line">			<span class="comment">//交给其他过滤器或者Servlet</span></div><div class="line">			chain.doFilter(req,resp);</div><div class="line">		&#125; </div><div class="line">	&#125;</div><div class="line">	<span class="comment">//容器启动后,创建过滤器实例,然后调用init方法,只会调用一次,将FilterConfig对象作为参数传入</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterconfig)</span><span class="keyword">throws</span> ServletException</span>&#123;</div><div class="line">		illegalWord = filterConfig.getInitParameter(<span class="string">"illegalWord"</span>);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.在doFilter方法中实现拦截处理逻辑<br>3.将过滤器添加到Web程序中(过滤器的优先级按照<filter-mapping>的先后顺序)<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter1<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>web.xxxServlet<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>filter1<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/xxx<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span>		xxx与哪个Servlet路径一致,代表指针对这个路径的请求都要进行过滤</div><div class="line">	<span class="comment">&lt;!-- 初始化参数--&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>innegalStr<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div></pre></td></tr></table></figure></filter-mapping></p>
<p>4.把过滤器和Web应用一起打包部署<br>Web客户端–&gt;code1–&gt;chain.doFilter()–&gt;Servlet的service()–&gt;code2–&gt;Web客户端<br>读取初始化参数:String config.getInitParamter(“illegalStr”)<br>过滤器优点:可插拔性(增加或减少某个功能不会影响程序正常执行),将多个相同处理逻辑的模块写在过滤器里,方便代码维护<br>编写监听器:(ServletRequest,HttpSession,ServletContext)<br>1.编写Java类(根据监听事件选择相应监听器接口)<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CouListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreate</span><span class="params">(HttpSessionEvent arg0)</span></span>&#123;</div><div class="line">		HttpSession session = arg0.getSession();</div><div class="line">		ServletContext ctx = session.getServletContext();</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.注册监听器:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>web.CouListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h1 id="EL-JSTL"><a href="#EL-JSTL" class="headerlink" title="EL JSTL"></a>EL JSTL</h1><p>EL表达式:简单的计算规则,用于给JSP标签属性赋值,也可以直接用来输出(JSP中嵌套Java代码不利于维护)<br>作用:<br>访问Bean属性(pageContext,request,session,application):${对象名.属性名}    ${对象名[“属性名”]}    ${user.array[1]}:user中数组array第2个元素<br>request.setAttribute(“userAge”,”age”);—&gt;  ${user[userAge]} 相当于 ${user[“age”]}<br>取值时绑定名写错(找不到返回null)或没有赋值(找不到返回null),实际上输出空白(属性名不能写错,否则报错)<br>${user.name}  相当于  &lt;%  User user = (User)request.getAttribute(“user”);  out.print(user.getName());   %&gt;<br>指定查找范围:如在session中查找:${sessionScope.user.name}  要查找的Bean属性加Scope<br>输出简单运算结果:”+”,”-“,”*”,”/“,”%”;”+”号只能求和不能连接字符串;”&amp;&amp;”,”||”,”!”,”&gt;”,”&gt;=”,”&lt;”,”&lt;=”,”==”,”!=”,<br>empty:${empty null}返回true;空字符串,空集合,值为null,找不到对应的值;返回结果true;<br>获取请求参数:${param.username}等价于request.getParameter(“username”);${paramValues.city}等价于request.getParameterValues(“city”);<br>JSTL(JSP Standard Tag Library):JSP标准标签库<br>使用JSTL:<br>1.将对应jar包放到WEB-INF/lib目录下<br>2.使用taglib指令导入要使用的JSP标签&lt;% @taglib uri=”<a href="http://java.sun.com/jsp/jstl/core" target="_blank" rel="external">http://java.sun.com/jsp/jstl/core</a>“ prefix=”c” %&gt; uri:JSP标签的命名空间 prefix:命名空间的前缀<br>if标签:<c:if test="${emp.gender}=='m'" var="rs" scope="request">男</c:if>    //rs为记录test结果的临时变量<br>当test属性值为true时,执行标签体的内容.test属性可以使用EL表达式<br>var属性:指定一个绑定名称;scope属性:指定绑定的范围(page,request,session,application);var和scope要配合使用<br>choose标签:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">c:choose</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">c:when</span> <span class="attr">test</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">c:when</span>&gt;</span></div><div class="line">   ......</div><div class="line">   <span class="tag">&lt;<span class="name">c:otherwise</span>&gt;</span><span class="tag">&lt;/<span class="name">c:otherwise</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">c:choose</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>forEach标签<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;c:<span class="keyword">forEach</span> <span class="keyword">var</span>=<span class="string">"emp"</span> items=<span class="string">"$&#123;emps&#125;"</span> varStatus=<span class="string">"s"</span>&gt;</div><div class="line">   <span class="variable">$&#123;emp</span>.name&#125;</div><div class="line">   <span class="variable">$&#123;emp</span>.gender&#125;</div><div class="line">   <span class="variable">$&#123;s</span>.<span class="keyword">count</span>/index&#125;</div><div class="line">&lt;/c:<span class="keyword">forEach</span>&gt;</div></pre></td></tr></table></figure></p>
<p>items属性:指定要便利的集合,一般使用EL表达式来复制<br>var属性:指定一个绑定的名称,容器每次从集合中取一个对象,然后绑定到pageContext对象上<br>varStatus属性:指定一个绑定名称,绑定值是一个由容器创建的对象,该对象封装了当前迭代的状态<br>index返回正在被迭代的对象下标(从0开始),coun返回第几次迭代(从1开始)<br>开发自定义标签:参考jstl-1.2.jar的META-INF的c.tld<br>1.编写Java类,继承SimpleTagSupport类<br>2.在doTag方法中添加处理逻辑<br>3.配置标签说明文件</p>
<h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><p>Ajax(局部刷新):Asynchronous JavaScript and XML异步的JavaScript和XML<br>Ajax原理:<br>使用Ajax发送异步请求<br>1.获得Ajax对象(可单独在js文件中写,或者放在html的<code>&lt;script&gt;</code>中):<br><figure class="highlight haxe"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> xhr = getXhr();</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getXhr</span></span>()&#123;</div><div class="line">	<span class="keyword">var</span> xhr = <span class="literal">null</span>;</div><div class="line">	<span class="keyword">if</span>(window.XMLHttpRequest)&#123;</div><div class="line">		xhr=<span class="keyword">new</span> <span class="type">XMLHttpRequest</span>();</div><div class="line">	&#125;<span class="keyword">else</span>&#123;</div><div class="line">	xhr = <span class="keyword">new</span> <span class="type">ActiveXObject</span>(<span class="string">'Microsoft.XMLHttp'</span>);<span class="comment">//针对IE</span></div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> xhr;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.编写回调事件处理函数:<br><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">xhr.onreadystatechange=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</div><div class="line">	<span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.<span class="keyword">status</span>==<span class="number">200</span>)&#123;</div><div class="line">		var txt =xhr.responseText;//<span class="keyword">out</span>.<span class="built_in">print</span>();</div><div class="line">		alert(txt);</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>3.创建请求-get:xhr.open(‘get’,’xx.do’,true);<br>  创建请求-post:xhr.open(‘post’,’xx.do’,true);<br>  xhr.setRequestHeader(‘content-type’,’application/x-www-form-urlencoded’);(添加消息头)</p>
<p>true:发送异步请求(发送请求时可做其他操作)false:发送同步请求(发送请求时不可做其他操作)<br>4.发送请求-get:xhr.send(null);    get若要提交数据,在xhr.open的url后面追加(xx.do?name=value&amp;name=value)<br>  发送请求-get:xhr.send(name=value&amp;name=value…);<br>异步对象的属性和方法:open(method,url)创建请求,method请求类型get post<br>send():发送请求;readyState:请求的状态;status:服务器返回的响应;readyState==4表示Ajax获得服务器返回的所有数据<br>解决get请求乱码(2种方式):IE的Ajax对象使用GBK对参数编码,其他浏览器使用UTF-8编码,服务器默认ios-8859-1解码<br>1.指定字符集解码;tomcat修改conf/server.mxl:<connector uriencoding="utf-8"><br>2.使用encodeURI对请求地址进行编码</connector></p>
<h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><p>JSON(导6个包,html):轻量级的数据交换格式,相对于XML,JSON解析速度更快,文档更小<br>结构:<br>1.名值对:{“name”:”Sally”,”city”:”北京”,”age”:25}<br>属性值可以是string,number,boolean(true,false),null,object.属性名必须使用双引号,属性值如果是字符串要用双引号<br>2.值的有序列表(数组,集合):[value,value,value…]    (可以互相套用)<br>使用JSON实现数据交换:java对象–&gt;JSON字符串(web服务器)–&gt;JSON字符串(客户端)–&gt;JavaScript对象<br>JSON对象–&gt;JavaScript对象:<br>1.var str = ‘{“name”:”张三”,”age”,18}’;    var obj = eval(“(“+str+”)”);<br>2.使用原生对象JSON提供的parse()方法:var obj = JSON.parse(str);<br>3.var obj = str.parseJSON();(需要用到JSON.js文件)<br>JS中JSON对象(obj)–&gt;String字符串:var str = obj.toJSONString();(需json.js);    var str = JSON.stringify(obj);    </p>
<p>java对象–&gt;JSON对象(通过拼接JSON字符串重构对象属性)<br>JSONObject obj = JSONObject.fromObject(emp);    String jsonStr = obj.toString();    java对象–&gt;JSON对象<br>JSONArray jsonArr = JSONObject.formObject(arr);    String jsonStr = jsonArr.toString();    java数组(集合)–&gt;JSON对象<br>JSON对象–&gt;Java对象<br>Emp emp = (Emp)JSONObject.toBean(obj,Emp.class);    List<emp> list = (List<emp>)JSONArray.toCollection(jsonArr,Emp.class);<br>缓存问题:IE浏览器在发送GET请求时,如果访问过该地址不再发送请求(Chrome,Firefox继续发请求);解决(请求后加随机数):xxx.do?Math.random();</emp></emp></p>
<h1 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h1><p>jQuery(write less,do more(html，要引入jQuery文件)):优秀的JS框架,轻量级的JS库,使用户的HTML页面保持代码和内容分离<br>jQuery编程步骤:1.引入jQuery的js文件2.使用选择器定位要操作的节点3.调用jQuery的方法进行操作<br>jQuery对象:链式编程(每次返回的都是jQuery对象);$(“div”);$(“#d1”);都是jQuery对象<br>DOM对象–&gt;jQuery对象:$(DOM对象);<br>jQuery对象–&gt;DOM对象:$obj.get(0)或者$obj.get()[0];$obj是jQuery对象<br>jQuery选择器:<br>基本选择器:#id(最快),.class(.s1),element(元素选择器div等)<br>层次选择器:<br>过滤选择器:first(第一个元素);last(最后一个元素);not(selector):把selector排除在外;even(挑选偶数行);even(挑选奇数行);<br>eq(index):下标等于index的元素;gt(index):下标大于index的元素;lt(index):下标小于index的元素;<br>例:$(“table tr:first”);$(“table tr:eq(1) td:eq(2)”);$(“table tr:not(#tr1)”);<br>内容过滤选择器:contains(text):匹配包含给定文本的元素;empty:匹配所有不包含子元素或者文本的空元素;<br>has(selector):匹配含有选择器所匹配的元素;parent:匹配含有子元素或者文本的元素<br>可见性过滤选择器:hidden:匹配所有不可见元素,或type为hidden的元素;visible:匹配所有的可见元素;还有属性,子元素过滤器<br>表单过滤选择器:enabled,disabled,checked,selected<br>表单选择器:input,text,password,radio,checkbox,submit,image,reset,button,file,hidden<br>利用选择器定位节点:$(“div”);$(“#di”);相当于<code>&lt;div id=&quot;d1&quot;&gt;&lt;/div&gt;</code><br>调用方法操作节点:$(“#d1”).css(“font-size”,”30px”);    //修改id=d1的样式<br>合并选择器(selector1,selector2…):例如$(“#d1,.s1,p”);<br>从节点select1中找子节点(h或者子子等节点)select2(select1空格select2):例如$(“#d1 div”);<br>只查找直接子节点,不查找间接子节点(select1&gt;select2):$(“#d1&gt;div”);<br>select1+select(+表示下一个兄弟节点)$(“#d1+div”);d1的类型为div,查找它同级的之后的一个div<br>select1~select2(~表示下面所有兄弟):$(‘#d2~div’);d1的类型为div,查找它同级的之后的所有div<br>jQuery操作DOM:<br>html():读取或修改节点的HTML内容;$(“#d1”).html() 相当于  document.getElementById(“d1”).innerHTML;<br>text():读取或修改节点的文本内容:$(“#d1”).text();<br>val():读取或修改节点的value属性值:$(“#d1”).val(“空白格”); 相当于 document.getElementById(“d1”).value=”空白格”;<br>attr():读取或者修改节点的属性:$(“#d1”).attr(“style”,”color:red;”);<br>创建DOM节点:$(‘body’).append(‘<code>&lt;div&gt;...&lt;/div&gt;</code>‘);  放在body最后一个节;$(“#d1”).before(“<code>&lt;p&gt;hello&lt;/p&gt;</code>“);var $obj=$(“#d2”).clone(true);<br>append():作为最后一个子节点添加进来;prepend():作为第一个子节点添加进来;after():作为下一个兄弟节点添加进来;<br>before():作为上一个兄弟节点添加进来;remove():移除;remove(selector):按选择器定位后删除;empty():清空节点;<br>clone():复制节点;clone(true):将处理代码一块复制<br>样式操作:<br>attr(“class”,””):获取和设置;addClass(“”):追加样式;removeClass(“”):移除样式;removeClass():移除所有样式;<br>toggleClass(“”):切换样式;hasClass(“”):是否有某个样式;css(“”):读取css的值;css(“”,””):设置多个样式;<br>遍历节点:<br>children():只考虑直接子节点;next():下一个兄弟节点;prev():上一个兄弟节点;siblings:其他兄弟;<br>find(selector):查找满足选择器的所有后代;parent():父节点;<br>分离js代码:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> obj = <span class="built_in">document</span>.getElementById(<span class="string">"d1"</span>);</div><div class="line">	obj.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.innerHTML=<span class="string">"this很重要"</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	$(<span class="string">"#d1"</span>).click(</div><div class="line">	<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		$(<span class="keyword">this</span>).html(<span class="string">'helle Ajax'</span>);</div><div class="line">	&#125;</div><div class="line">	);</div><div class="line">&#125;</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>两种方式完成的操作是等价的,都是在页面加载后,为div添加点击事件.<br>使用jQuery实现事件绑定:$obj.bind(‘click’,fn)相当于$obj.click(fn);<br>取消事件冒泡:e.stopPropagation()<br>jQuery动画:效果很好;显示(显示之前要display:none):$(“#d1”).show(3000,f1),隐藏:$(“#d2”).hide(3000,function(){…}),f1为回调函数，可不写<br>上下滑动:slideDown()/slideUp();淡入:fadeIn(),淡出fadeOut,自定义动画;他们的用法都同show()/hide()<br>load():将服务器返回的数据字节添加到符合要求的节点之上;$obj.load(请求地址,请求参数);<br>jQuery对Ajax的支持:使用$.load(),$.get(),$.post(),$.ajax()方法发送异步请求(3种方法)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span>$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	$(<span class="string">"#d1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		$(<span class="keyword">this</span>).load(<span class="string">'salary.do'</span>,<span class="string">'eId='</span>+eId);</div><div class="line">	&#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2</span>.function quoto()&#123;</div><div class="line">	$.post('quoto.<span class="keyword">do</span>','eId='+eId,function(data)<span class="meta">&#123;...&#125;</span>,'json');</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>$.get(请求地址,请求参数,回调函数,服务器返回的数据类型)<br>data是服务器返回的数据,json是返回数据格式的说明,如果data是json字符串,会自动转换为相应的javascript对象<br>修改post请求为get请求时,相关参数不变,要在请求地址后面追加一个随机数欺骗IE浏览器<br><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">3</span>.function quoto()&#123;</div><div class="line">	$.ajax(</div><div class="line">		&#123; url:<span class="string">"quoto.do"</span>,<span class="keyword">type</span>:<span class="string">"post"</span>,dataType:<span class="string">"json"</span>,success:function(data)<span class="meta">&#123;...&#125;</span>,error:function()<span class="meta">&#123;...&#125;</span> &#125;</div><div class="line">	);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>JQuery发送ajax请求：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$.ajax(&#123;</div><div class="line">	<span class="attr">cache</span>: <span class="literal">false</span>,	<span class="comment">//cache的作用就是第一次请求完毕之后,如果再次去请求,可以直接从缓存里面读取而不是再到服务器端读取</span></div><div class="line">	<span class="keyword">async</span>: <span class="literal">false</span>,		<span class="comment">//async : false,表示同步，同步会等待执行完成，直到success 执行完成！如果是true，倒是有可能先执行alert("谁先");</span></div><div class="line">	url: <span class="string">"/mall/UserServlet"</span>,		<span class="comment">//要发送到servlet的url</span></div><div class="line">	data: &#123;<span class="attr">method</span>: <span class="string">"ajaxValidateVerifyCode"</span>, <span class="attr">verifyCode</span>: value&#125;,	<span class="comment">//要发送到servlet的数据(ajax格式),method是方法名，后面的是属性名，属性值</span></div><div class="line">	type: <span class="string">"POST"</span>,		<span class="comment">//method为post</span></div><div class="line">	dataType: <span class="string">"json"</span>,	<span class="comment">//数据类型为json</span></div><div class="line">	success: <span class="function"><span class="keyword">function</span>(<span class="params">flag</span>) </span>&#123;		<span class="comment">//如果发送成功后，flag为servlet的值，resp.getWriter().print(flag);</span></div><div class="line">		<span class="keyword">if</span>(!flag) &#123;</div><div class="line">			$(<span class="string">"#verifyCodeError"</span>).css(<span class="string">"display"</span>, <span class="string">""</span>);</div><div class="line">			$(<span class="string">"#verifyCodeError"</span>).text(<span class="string">"错误的验证码！"</span>);</div><div class="line">			bool = <span class="literal">false</span>;					</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h1 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h1><p>反射:反射就是把java类中的各种成分映射成相应的java类<br>Class(反射的基石)–&gt;Class类代表java类<br>Class cla1 = Date.class(字节码得到对象)<br>得到字节码对应对象的3种方法:1.类名.class;2.对象.getClass();例如:new Date().getClass();3.Class.forName(“类名”);例如Class.forName(“java.lang.String”);<br>3种方法得到的对象是同一个对象,无论用来得到该对象的对象(对象.getClass();)是否是同一个。用 == 比较两个字节码是否是同一个因为是字节码,一种只有一份<br>Class.forName(“java.lang.String”);//得到类的字节码;字节码:把字节码加载到内存中,再用字节码复制出一个个对象<br>9个预定义的Class实例对象,8个基本类型(cls.isPrimitive())+void<br>int.class==Integer.TYPE;int类型得到的对象和Integer类型得到的基本类型对象是同一个(8种)<br>数组类型(每种数组都有各自Class实例对象)的Class实例对象:cls.isArray();<br>只要在源程序中出现的类型都有各自的Class实例对象,例如:int[],void…<br>Field:类的成员变量<br>Field fieldY = pt1.getClass().getField(“y”);    //由pt1.getClass()得到这个类,再getField(“y”)得到该类的成员变量(只能得到public不能得到private);<br>Field fieldY = pt1.getClass().getDeclareField(“y”);//得到私有的成员变量需要用getDeclareField(“y”);<br>上面虽然得到了私有的成员变量,但是不能用,还要调用一个方法:fieldY.setAccessible(true);暴力反射<br>fieldY.get(pt1);得到pt1对象的该成员方法的值,Object类型;fieldY.set(obj,newValue);设置该对象该变量的值<br>field.getType();得到该变量的字节码;field.set(pt1,value);设置pt1对象的field变量的值;<br>Method:方法;得到一个Method对象就得到了一个Method方法<br>Method method = String.class().getMethod(name,parameterTypes); //先得到字节码对象,再根据方法名和参数得到方法<br>method.invoke(str,1);该方法被str调用,参数是1;如果调用静态方法:method.invoke(null,1);<br>这里如果参数是一个数组,不能直接写成数组,jdk1.4会自动把数组拆成几个参数,要写成:new Object[] {new int[]{1,2,3}}或者(Object)new int[]{1,2,3};int[]就没关系,因为int[]不是Object[]类型<br>Contructor:构造器<br>得到所有构造方法:Constructor constructors[] = Class.forName(“java.lang.String”).getConstructors();<br>得到单个构造方法:Constructor constructor = Class.forName(“java.lang.String”).getConstructors(StringBuffer.class,…);根据参数类型来确定是哪个构造方法<br>创建实例对象(反射方式):String obj = (String)constructor.newInstance(new StringBuffer(“abc”));//得到的是obj对象,需要强转,获得构造器,创建对象<br>String obj = (String)Class.forName(“java.lang.String”).newInstance();//得到默认的构造方法并创建实例对象<br>Package:包<br>数组的反射:clazz.isArray();Array.getLength(obj);Array.get(obj.i);//java.lang.reflect.Array;<br>反射的作用:实现框架功能,通过配置文件获取类完整名,通过反射得到该类,实现功能<br>Struts:<br>你去调用别人的类,框架就是别人的类来调用你的类,框架就像房子一样，<br>IntroSpector(内省)–&gt;JavaBean–&gt;特殊的Java类,主要用于传递数据信息,这种类中的方法主要用来访问私有的字段,且方法名符合某种命名规则<br>类要在两个模块间传递多个信息,可以将这些信息封装到一个JavaBean中,信息用私有字段储存,get,set方法来确定<br>一个类有get和set方法就可以当做JavaBean来操作<br>JavaBean的属性名:Age–&gt;age:如果第一个字母是大写的,则把第一个字母变成小写的;<br>例子:gettime–&gt;time;setTime–&gt;time;getCPU–&gt;CPU;<br>JDK中提供了对JavaBean进行操作的一些API,这套API就成为内省,用内省这套api操作JavaBean比用普通类的方法更方便<br>在程序中把一个类当做JavaBean来看,就是调用IntroSpector.getBeanInfo方法,得到的BeanInfo对象封装了把这个类当做JavaBean看的结果信息<br>BeanUtils工具包<br>BeanUtils.getProperty(pt1,”x”);得到pt1对象的x属性;pt1.getX();<br>BeanUtils.setProperty(pt1,”brithday.time”,”1111”);设置pt1对象的brithday的time属性的值为1111;pt1.getBrithday().setTime(“111”);</p>
<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><p>Spring容器实现了IOC和AOP机制，这些机制可以简化Bean对象的创建和Bean对象之间的解耦;<br>Bean的实例化：<br>1.用构造器来实例化:<bean id(name)="calendarObj1" class="java.util.GregorianCalendar"><br>2.使用静态工厂方法实例化:<bean id(name)="calendarObj2" class="java.util.Calendar" factory-method="getInstance"><br>3.使用实例工厂方法实例化:<bean id(name)="calendarObj3" factory-bean="calendarObj1" factory-method="getTime"><br>IOC(Inversion of Control控制反转)概念:程序中对象的获取方式发生反转，由最初的new方式创建，转变为由第三方框架创建、注入。<br>IOC控制由DI(依赖注入)方式实现。DI是实现IOC的主要技术途径。<br>DI主要有两种注入方式:Setter注入和构造器注入<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"dao.JDBCDataSource"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 注入属性 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"oracle.jdbc.OracleDriver"</span>/&gt;</span></div><div class="line">......</div><div class="line"><span class="comment">&lt;!-- 注入Bean对象 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"userDAO"</span>&gt;</span><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.dao.OracleYserDao"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"pwd"</span> <span class="attr">value</span>=<span class="string">"123456"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 构造器注入 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userDAO"</span> <span class="attr">class</span>=<span class="string">"dao.OracleDriver"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">constructor-argindex="0"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></bean></bean></bean></p>
<p>自动装配:byName,byType<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"userService"</span> <span class="attribute">class</span>=<span class="string">"service.userService"</span> <span class="attribute">autowire</span>=<span class="string">"byType"</span>/&gt;</div></pre></td></tr></table></figure></p>
<p>上述配置中，如果userService中有其他变量在bean容器中，可以按照类型注入;<br>List注入,Set注入,Map注入,Properties注入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property name=<span class="string">"friends"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">list</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span></div><div class="line">&lt;property name=<span class="string">"friends"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">set</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span></div><div class="line">&lt;property name=<span class="string">"friends"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">map</span>&gt;</span><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"1"</span> <span class="attr">value</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span><span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"2"</span> <span class="attr">value</span>=<span class="string">"2"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span></div><div class="line">&lt;property name=<span class="string">"friends"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">props</span>&gt;</span><span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"1"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">prop</span>&gt;</span><span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"2"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">prop</span>&gt;</span><span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><span class="xml"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span></div></pre></td></tr></table></figure></p>
<p>组件扫描:发现组件类定义前有特定的注解标记时，就将该组件纳入到Spring容器。等价于原有XML配置中的<code>&lt;bean&gt;</code>定义功能<br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">context</span>:<span class="keyword">component</span>-scan base-<span class="keyword">package</span>=<span class="string">"org.example"</span>/&gt;</div></pre></td></tr></table></figure></p>
<p>自动扫描的注解标记:<br>@Component    通用注解<br>@Name        通用注解<br>@Repository    持久化层组件注解<br>@Service    业务层组件注解<br>@Controller    控制层组件注解<br>@Scope(“prototype”)    默认的作用域是”singleton”<br>指定依赖注入关系:<br>@Resource    默认首先按名称匹配注入，然后类型匹配注入 @Resource(name=”empDao1”)<br>@Autowired    默认按类型匹配注入,多匹配Bean时,@Autowired @Qualifier(“mysqlUserDao”)<br>注入Spring表达式: @Value(“#{jdbcProps.url}”)<br>web.xml配置:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 配置Spring的监听器，用于初始化ApplicationContext对象 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>AOP:面向切面编程，主要处理共通逻辑(日志记录,性能统计,安全控制,事务处理,异常处理等)，将共通逻辑从普通代码逻辑中分离出来;<br>对业务逻辑各个部分进行隔离,降低耦合度;<br>AOP针对业务处理过程中的切面进行提取;面对的是处理过程中的某个步骤或阶段<br>AOP实现原理:主要基于动态代理技术,当Spring采用AOP配置后,Spring容器返回的目标对象,实质上是Spring利用动态代理技术生成的一个代理类型。<br>代理类重写了原目标组件方法的功能,在代理类中调用方面对象功能和目标对象功能。<br>两种动态代理实现:目标有接口,没有接口实现<br>方面:封装共通处理的组件,该组件被作用到其他目标组件方法上。<br>目标:被一个或多个方面所作用的对象<br>切入点:用于指定哪些组件和方法使用方面功能,在Spring中利用一个表达式指定切入目标。<br>Spring框架提供的5种通知:<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">try</span>&#123;</div><div class="line"><span class="comment">//前置通知--执行方面</span></div><div class="line"><span class="comment">//环绕通知前置部分</span></div><div class="line"><span class="comment">//执行目标组件方法</span></div><div class="line"><span class="comment">//环绕通知后置部分</span></div><div class="line"><span class="comment">//后置通知--执行方面</span></div><div class="line">&#125;<span class="keyword">catch</span>()&#123;</div><div class="line"><span class="comment">//异常通知--执行方面</span></div><div class="line">&#125;<span class="keyword">finally</span>&#123;</div><div class="line"><span class="comment">//最终通知--执行方面</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>开发步骤:<br>创建方面组件:创建一个类,充当方面组件,实现通用业务逻辑<br>声明方面组件:在applicationContext.xml中开启AOP注解扫描:<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;aop:aspectj-autoproxy proxy-target-<span class="keyword">class</span>=<span class="string">"true"</span>/&gt;</div></pre></td></tr></table></figure></p>
<p>使用 @Component注解标识需要声明为方面组件的类，将其纳入Spring管理<br>使用 @Aspect注解标识需要声明为方面组件的类<br>使用方面组件:在方面组件的方法上,使用注解将方面组件作用到目标组件的方法上,并设置通知类型以确认方面组件调用的时机。<br>前置通知: @Before(“within(“com.yh.controller..*”)”)<br>后置通知: @AfterReturning(“within(“controller…”)”)<br>最终通知: @After(“within(“controller…”)”)<br>环绕通知” @Around(“within(“controller…”)”)<br>异常通知: @AfterThrowing(pointcut=”within(“controller…”)”,throwing=”e”)</p>
<p>Transaction(事务):<br>事务是应用程序中一系列严密的操作，所有操作必须成功完成，否则在每个操作中所作的所有更改都会被撤消。也就是事务具有原子性，一个事务中的一系列的操作要么全部成功，要么一个都不做。<br>事务的结束有两种，当事务中的所以步骤全部成功执行时，事务提交。如果其中一个步骤失败，将发生回滚操作，撤消之前到事务开始时的所有操作。<br>二．事务的 四个特征(ACID(Atomicity、Consistency、Isolation、Durability ))<br>事务具有四个特征：原子性（ Atomicity ）、一致性（ Consistency ）、隔离性（ Isolation ）和持续性（ Durability ）。这四个特性简称为 ACID 特性。<br>1 、原子性<br>事务是数据库的逻辑工作单位，事务中包含的各操作要么都做，要么都不做<br>2 、一致性<br>事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。因此当数据库只包含成功事务提交的结果时，就说数据库处于一致性状态。如果数据库系统 运行中发生故障，有些事务尚未完成就被迫中断，这些未完成事务对数据库所做的修改有一部分已写入物理数据库，这时数据库就处于一种不正确的状态，或者说是 不一致的状态。<br>3 、隔离性<br>一个事务的执行不能其它事务干扰。即一个事务内部的操作及使用的数据对其它并发事务是隔离的，并发执行的各个事务之间不能互相干扰。<br>4 、持续性<br>也称永久性，指一个事务一旦提交，它对数据库中的数据的改变就应该是永久性的。接下来的其它操作或故障不应该对其执行结果有任何影响。<br>数据库系统必须维护事务的以上特性 (  ACID)。<br>在相同线程中进行相互嵌套调用的事务方法工作于相同的事务中。如果这些相互嵌套调用的方法工作在不同的线程中，不同线程下的事务方法工作在独立的事务中。</p>
<h1 id="Spring-MVC-控制层-Controller"><a href="#Spring-MVC-控制层-Controller" class="headerlink" title="Spring MVC:控制层(Controller)"></a>Spring MVC:控制层(Controller)</h1><p>M-Model模型:负责业务逻辑,包含两层:业务数据和业务处理逻辑,entity,DAO,Service<br>V-View视图:显示界面和用户交互,JSP<br>C-Controller控制器:M和V之间的桥梁,用于控制流程<br>DispatcherServlet控制器配置(前端控制器):<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></div><div class="line">  		org.springframework.web.servlet.DispatcherServlet</div><div class="line">  	<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">  		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">  		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>SpringMVC执行流程:<br>浏览器向Tomcat服务器发起Web请求–&gt;将Web请求交给DispatcherServlet处理–&gt;DispatcherServlet根据HandlerMapping中的urlMappings(RequestMapping)将Web请求<br>转到相应Controller–&gt;处理请求，返回ModelAndView–&gt;Spring核心控制器收到ModelAndView中的视图，利用ViewResolver中的前后缀到相应jsp文件。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 视图处理器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"viewResolver"</span> </span></div><div class="line">	<span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> </span></div><div class="line">		<span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>当使用注解的方式时:开启 @RequestMapping注解映射,需要在Spring的XML配置文件进行配置:<mvc:annotation-driven><br>Spring MVC Web请求提交数据到控制器有下面几种方法(接受请求参数值):<br>1.使用HttpServletRequest获取:String name = req.getParameter(“name”);<br>Spring会自动将表单参数注入到方法参数(名称一致)使用 @RequestParam注解,映射不一致的名称;优点:参数类型自动转换<br>2.使用 @RequestParam注解: @RequestParam(“pwd”)String password;<br>3.使用自动机制封装成Bean对象:定义User实体,属性名与<form>表单组件的name相同;User要放在方法参数中<br>当Controller组件处理后,需要向JSP传值时,用下面方法(向页面传值):<br>1.直接使用HttpServletRequest和Session<br>2.使用ModelAndView对象:    return new ModelAndView(“success”,data);<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Model数据会利用HttpServletRequest的Attribute传值到success.jsp中</span></div><div class="line">@RequestMapping(<span class="string">"/login.do"</span>)  </div><div class="line"><span class="keyword">public</span> ModelAndView  login(<span class="built_in">String</span> name,<span class="built_in">String</span> pass)&#123;  </div><div class="line">    User user = userService.login(name,pwd);  </div><div class="line">    <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Object&gt; <span class="built_in">data</span> = <span class="literal">new</span> HashMap&lt;<span class="built_in">String</span>,Object&gt;();  </div><div class="line">    <span class="built_in">data</span>.put(<span class="string">"user"</span>,user);  </div><div class="line">    <span class="keyword">return</span> <span class="literal">new</span> ModelAndView(<span class="string">"success"</span>,<span class="built_in">data</span>);  </div><div class="line">&#125;</div></pre></td></tr></table></figure></form></mvc:annotation-driven></p>
<p>3.使用ModelMap参数对象:在Controller处理方法中追加一个ModelMap类型参数model,model.addAttribute(“user”,user);<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//ModelMap数据会利用HttpServletRequest的Attribute传值到success.jsp中</span></div><div class="line">@RequestMapping(<span class="string">"/login.do"</span>)  </div><div class="line"><span class="keyword">public</span>　<span class="keyword">String</span> login(<span class="keyword">String</span> name,<span class="keyword">String</span> pass ,ModelMap model)&#123;  </div><div class="line">    User user  = userService.login(name,pwd);  </div><div class="line">    model.addAttribute(<span class="string">"user"</span>,user);  </div><div class="line">    model.<span class="built_in">put</span>(<span class="string">"name"</span>,name);  </div><div class="line">    <span class="built_in">return</span> <span class="string">"success"</span>;  </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>4.使用 @ModelAttribute注解:在Controller方法的参数部分或Bean属性方法上使用 @ModelAttribute(“user”)User user<br><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@ModelAttribute(<span class="meta-string">"name"</span>)</span></div><div class="line"><span class="keyword">public</span> String getName()&#123;</div><div class="line">	<span class="keyword">return</span> name;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>如果Collection中的方法return的不是url而是一个user对象，那么springmvc默认访问的URL是前缀+ @RequestMapping +后缀;user对象作为值传入页面<br>Session存储:req.getSession().setAttribute(“loginUser”,user);</p>
<p>Spring对Ajax的支持<br>Spring MVC提供了JSON响应的支持，很方便地将数据转换成JSON格式字符串给客户端JavaScript返回。在SpringMVC中与JSON响应相关的注解为 @ResponseBody<br>jar包支持:jackson-annotations-2.4.1.jar、jackson-core-2.4.1.jar、jackson-databind-2.4.1.jar<br>配置文件中定义<mvc:annotation-driven>开启对 @ResponseBody应用的支持;该注解可将基本类型数据,Map,集合或数组,实体对象,实体对象集合做成json<br>案例:<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="variable">@ResponseMapping</span>(<span class="string">"/test1"</span>)</div><div class="line"><span class="variable">@ResponseBody</span></div><div class="line">public boolean f1()&#123;</div><div class="line"><span class="comment">//业务代码处理</span></div><div class="line"><span class="selector-tag">return</span> <span class="selector-tag">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></mvc:annotation-driven></p>
<h1 id="Struts2-控制层-Controller"><a href="#Struts2-控制层-Controller" class="headerlink" title="Struts2:控制层(Controller)"></a>Struts2:控制层(Controller)</h1><p>Struts2是轻量级的MVC框架,主要解决了请求分发的问题,重心在控制层(action)和表现层(OGNL)<br>Struts2是在Struts1(与JSP/Servlet耦合非常紧密)和WebWork的技术基础上进行合并的全新MVC框架,以Xwork为核心,可以理解为WebWork的升级版;<br>Struts2核心包:commons-fileupload,freemarker,ognl,struts2-core,xwork-core<br>配置前端控制器:<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- 配置Struts2的主过滤器 --&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>struts2<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 全局的Result配置 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">global-results</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"loginUI"</span>&gt;</span>/WEB-INF/jsp/userAction/loginUI.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"noPrivilegeError"</span>&gt;</span>/noPrivilegeError.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 首页  </span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="comment">指的是第一个*指代内容--&gt;</span></span></div><div class="line">	<span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"home_*"</span> <span class="attr">class</span>=<span class="string">"homeAction"</span> <span class="attr">method</span>=<span class="string">"</span></span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"</span></span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>/WEB-INF/jsp/homeAction/</span><span class="template-variable">&#123;1&#125;</span><span class="xml">.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span></div><div class="line">		<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"</span></span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span> <span class="attr">type</span>=<span class="string">"redirectAction"</span>&gt;</span>home_</span><span class="template-variable">&#123;1&#125;</span><span class="xml">?id=$</span><span class="template-variable">&#123;topicId&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">result</span>&gt;</span></span></div><div class="line">	<span class="tag">&lt;/<span class="name">action</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>业务控制器Action中返回的字符串要与struts.xml–&gt;action–&gt;result的name属性匹配;<br>页面向Action传参:<br>基本属性注入:在Action中定义基本属性,并提供set方法(页面向Action传参)和get方法(Action向页面传参)<br>域模型注入:在Action中定义实体对象属性,并提供set(页面向Action传参)、get方法(Action向页面传参)<br>域模型注入时,表单中文本框制定表达式”对象名.属性名”<br>OGNL:一门功能强大的表达式语言,类似于EL;<br>Struts2默认采用OGNL表达式访问Action的数据(Struts2也支持EL表达式),实际上是通过ValueStack对象来访问的Action<br>EL:${user.userName}  等价于  OGNL:<s:property value="user.userName"><br>OGNL表达式(数组/集合、Map):<s:property value="cityArray[1]/cityList[1]/cityMap.key"><br>ValueStack:封装了Action的数据,并允许JSP通过OGNL来对其进行访问<br>EL表达式也可以访问ValueStack中的数据;<br>获取Session的方式:<br>1.ActionContext.getContext().getSession();返回值类型为:Map<string,object><br>2.ServletActionContext.getRequest().getSession();返回值类型为HttpSession<br>3.让Action实现SessionAware接口,实现void setSession(Map<string,object> session)方法,Struts2会在实例化Action后调用该方法,通过方法参数将Session对象注入进来，我们要<br>定义成员变量接收注入进来的Session对象,推荐这种方法,采用注入思想更为灵活,面向接口编程,符合主流规范。<br>Result组件:用于向页面输出一些内容(每个Result实际上就是一个类,实现了共同的接口Result),转发(dispatcher,默认的result,将请求转给JSP),重定向(redirectAction)<br>UI标签:<s:textfield name="userName">    生成一个文本框,根据OGNL表达式userName访问ValueStack,并将取得的结果设置为文本框的默认值<br>单选框,多选框,下拉框的设置:<br><s:radio name="M" list="#{'M':'男','F':'女'}" label="性别">根据OGNL(list属性值)创建的Map生成一组radio,其中Map的key可以生成radio的value值,Map的value<br>生成radio的label值。根据OGNL的取值(M)来与生成的radio的value比较,与哪个radio的value值一致,将其勾选。<br>动态单选框:<br><s:radio name="customer.marry" list="sexes" listkey="code" listvalue="name" label="性别">根据list初始化一组radio,根据name与listKey比较进行勾选。<br>多选框和单选框用法类似,也分为静态和动态两种区别在于将radio改为checkbox;下拉选标签也类似,将radio改为select<br>拦截器:<br>1.创建拦截器组件<br>创建一个类,实现Interceptor接口,并实现intercept方法。<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public <span class="class"><span class="keyword">class</span> <span class="title">CheckPrivilegeInterceptor</span> <span class="keyword">extends</span> <span class="title">AbstractInterceptor</span></span>&#123;</div><div class="line">	public <span class="type">String</span> intercept(<span class="type">ActionInvocation</span> invocation) <span class="keyword">throws</span> <span class="type">Exception</span> &#123;</div><div class="line">		<span class="comment">//如果有权限就放行</span></div><div class="line">		<span class="keyword">if</span>(user.hasPrivilegeByUrl(privUrl))&#123;</div><div class="line">			<span class="keyword">return</span> invocation.invoke();<span class="comment">//执行action和result</span></div><div class="line">		&#125;</div><div class="line">		<span class="comment">//如果没有权限就转到提示页面</span></div><div class="line">		<span class="keyword">else</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="string">"noPrivilegeError"</span>;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></s:radio></s:radio></s:textfield></string,object></string,object></s:property></s:property></p>
<p>2.注册拦截器<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"default"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 声明有这么个拦截器 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"checkPrivilege"</span> <span class="attr">class</span>=<span class="string">"cn.itcast.oa.util.CheckPrivilegeInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 往往一个Action需要引用很多个拦截器,那么可以将这些拦截器打包成栈,直接引用这个栈即可,这样可以简化对拦截器的引用,</span></div><div class="line">		拦截器只是为了方便,在使用上等同于拦截器。可以将默认的拦截器(我们不需要在Action中做任何处理就相当于引用了这个拦截器)</div><div class="line">		改成我们定义的:name="defaultStack"--&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"myStack"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"checkPrivilege"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>3.引用拦截器:如果哪个Action希望被拦截器扩展,需要在此action配置下,引用拦截器<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">action</span> <span class="attr">name</span>=<span class="string">"home_*"</span> <span class="attr">class</span>=<span class="string">"homeAction"</span> <span class="attr">method</span>=<span class="string">"</span></span></span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span></span></div><div class="line">	<span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"checkPrivilege"</span>/&gt;</span>//可以写多个</div><div class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"</span></span><span class="template-variable">&#123;1&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span>/WEB-INF/jsp/homeAction/</span><span class="template-variable">&#123;1&#125;</span><span class="xml">.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">action</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>拦截器是在实例化Action,调用业务方法之前开始调用的。<br>设置当前包下所有Action默认引用的拦截器:<default-interceptor-ref name="myStack"><br>多个拦截器拦截Action的顺序满足先进后出的原则。</default-interceptor-ref></p>
<h1 id="Hibernate-数据访问层"><a href="#Hibernate-数据访问层" class="headerlink" title="Hibernate(数据访问层)"></a>Hibernate(数据访问层)</h1><p>概念:是数据访问层的框架,对JDBC进行了封装,是针对数据库访问提出的面向对象的解决方案(ORM);<br>使用Hibernate可以直接访问对象,将访问转换成SQL执行对象–&gt;数据库<br>Hibernate:采用数据库与Entity映射,对JDBC封装程度较重,自动生成SQL,对于基本的操作,开发效率高<br>MyBatis:采用SQL与Entity映射,对JDBC封装程度较轻,自己写SQL,更具灵活性<br>Hibernate与MyBatis共同点:对JDBC进行了封装,采用ORM思想解决了Entity和数据库的映射问题<br>ORM思想:Object Relation Mapping对象关系映射(java对象和关系数据库直接的映射)<br>主配置文件:hibernate.cfg.xml;配置数据库连接参数,框架参数,映射关系文件;实体类,映射关系文件<br>Hibernate常用API:<br>Configuration,SessionFactory,Session,Transaction,Query<br>Hibernate主键生成方式:<br>sequence:是采用序列方式生成主键,适用于Oracle数据库;<br>identity:采用数据库自增长机制生成主键,适用于Oracle之外的其他数据库<generator class="identity"><br>native:根据当前配置的数据库方言,自动选择sequence或者identity<br>increment:Hibernate提供的一种生成主键方式,获取当前表中主键的最大值,然后加1作为新的主键(在并发量高时,可能会生成重复的主键)<br>assigned:Hibernate不负责生成主键,需要程序员自己处理主键的生成。<br>uuid/hilo:采用uuid或hilo算法生成一个主键值,这个主键值是一个不规则的长数字<br>创建Session工具类:Configuration conf=new Configuration().configure(“/hibernate.cfg.xml”);SessionFactory = conf.buildSessionFactory();<br>session = SessionFactory.openSession();session.save(e);<br>开启事务:Transaction ts = session.beginTransaction();回滚事务:ts.rollback();<br>一级缓存:Hibernate创建每个Session对象时,都会给该Session分配一块独立的缓存区(一级缓存,Session级缓存),用于存放该Session查询出来的对象。<br>Session取数据时,会优先向缓存区取数据,没有才去数据库查询,降低数据库访问次数,提高代码效率。<br>一级缓存是Session独享,每个Session不能访问其他Session的缓存区,Session的save、update、delete操作会触发缓存更新。线程不安全<br>延迟加载(提升内存资源利用率,降低对数据库访问次数):在使用Hibernate方法查询数据时,返回的是一个空对象(只有id),只有在使用这个对象时,才会触发查询数据库,写入数据<br>使用延迟加载要避免Session提前关闭,要在视图层保持session的开启<br>关联映射:<br>一对多关联:通过增/删/改/查一,自动增/删/改/查多<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- replies属性，本类与Reply的一对多--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"replies"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"topicId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">one-to-many</span> <span class="attr">class</span>=<span class="string">"Reply"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></generator></p>
<p>多对一关联:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- topic属性，本类与Topic的多对一--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">many-to-one</span> <span class="attr">name</span>=<span class="string">"topic"</span> <span class="attr">class</span>=<span class="string">"Topic"</span> <span class="attr">column</span>=<span class="string">"topicId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-one</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>多对多关联:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- users属性，本类与User的多对多(Role类) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"users"</span> <span class="attr">table</span>=<span class="string">"itcast_user_role"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"roleId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"User"</span> <span class="attr">column</span>=<span class="string">"userId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- roles属性，本类与Role的多对多(User类) --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">set</span> <span class="attr">name</span>=<span class="string">"roles"</span> <span class="attr">table</span>=<span class="string">"itcast_user_role"</span> <span class="attr">lazy</span>=<span class="string">"false"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">key</span> <span class="attr">column</span>=<span class="string">"userId"</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">many-to-many</span> <span class="attr">class</span>=<span class="string">"Role"</span> <span class="attr">column</span>=<span class="string">"roleId"</span>&gt;</span><span class="tag">&lt;/<span class="name">many-to-many</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>一对一关联:<property name="name"><br>继承关联:<br>级联操作:通过关联映射,在对一方进行增删改查时,连带增删改关联的另一方数据。(cascade=”save-update/delete/all”)<br>二级缓存:SessionFactory级别的缓存(全局),二级缓存的数据是Session间共享的。<br>实体查询:<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="literal">void</span> testQueryAllDept()&#123;  </div><div class="line"><span class="built_in">String</span> hql=<span class="string">"from Employee"</span>;  </div><div class="line">       <span class="comment">//hql="from com.sh.Entity";  </span></div><div class="line">Query query=session.createQuery(hql);  </div><div class="line">  </div><div class="line"><span class="built_in">List</span>&lt;Employee&gt; <span class="built_in">list</span>= query.<span class="built_in">list</span>();  </div><div class="line">  </div><div class="line"><span class="comment">//...  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure></property></p>
<p>有条件的 实体查询 :<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="literal">void</span> testQueryAllDept()&#123;  </div><div class="line"><span class="built_in">String</span> hql=<span class="string">"from Deptas model where mode.deptName like '%部%' "</span>;  </div><div class="line">       <span class="comment">//hql="from com.sh.Entity";  </span></div><div class="line">Query query=session.createQuery(hql);  </div><div class="line">  </div><div class="line"><span class="built_in">List</span>&lt;Employee&gt; <span class="built_in">list</span>= query.<span class="built_in">list</span>();  </div><div class="line">  </div><div class="line"><span class="comment">//...  </span></div><div class="line">&#125; </div><div class="line"> <span class="keyword">public</span> <span class="literal">void</span> testQueryDeptByGt()&#123;  </div><div class="line">  </div><div class="line"> <span class="built_in">String</span> hql=<span class="string">"from Dept model where model.createDate&gt; '2012-03-10'"</span>;  </div><div class="line"> Query query=session.createQuery(hql);  </div><div class="line"> <span class="built_in">List</span>&lt;Employee&gt; <span class="built_in">list</span>= query.<span class="built_in">list</span>();  </div><div class="line"> &#125; </div><div class="line"> <span class="comment">// delete  删除  </span></div><div class="line"><span class="keyword">public</span> <span class="literal">void</span> testDelDeptByHql()&#123;  </div><div class="line">        Transaction tr=session.beginTransaction();  </div><div class="line">        <span class="built_in">String</span> hql=<span class="string">"delete Dept as model where model.deptId=6"</span>;  </div><div class="line">        Query query=session.createQuery(hql);  </div><div class="line">        query.executeUpdate();  </div><div class="line">        tr.commit();  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>属性查询:<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">public void testQueryDeptName()&#123;  </div><div class="line">    String hql=<span class="string">"select model.deptName from Dept as model"</span>;  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">    <span class="keyword">List</span>&lt;String&gt; deptNameList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">    <span class="comment">//...  </span></div><div class="line">&#125;  </div><div class="line">       public void testQueryDeptName()&#123;  </div><div class="line">    String hql=<span class="string">"select model.deptName,model.createDate from Dept as model"</span>;  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">    <span class="keyword">List</span>&lt;Object[]&gt; prsList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">               <span class="keyword">for</span>()&#123;  </div><div class="line">               &#125;                 </div><div class="line">    <span class="comment">//...  </span></div><div class="line">&#125;  </div><div class="line">      </div><div class="line">   <span class="comment">//采用对象进行 保存 查询的字段(要添加 对应字段的构造方法)  </span></div><div class="line">    public void testQueryDeptName()&#123;  </div><div class="line">    String hql=<span class="string">"select new Dapt(model.deptName,model.createDate) from Dept as model"</span>;  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">    <span class="keyword">List</span>&lt;Dept&gt; deptList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">               <span class="keyword">for</span>(Dept <span class="keyword">d</span>:deptList)&#123;  </div><div class="line">                  </div><div class="line">                  <span class="keyword">d</span>.setDeptName(<span class="string">"test"</span>);  </div><div class="line">                  session.saveOrUpdate(dept);  </div><div class="line">               &#125;                 </div><div class="line">    <span class="comment">//...  </span></div><div class="line">&#125;     </div><div class="line"><span class="comment">//如果采用对象 保存上面查询出来的对象  如果对其进行更新的操作 是不会成功的  </span></div><div class="line">public void testSaveDept()&#123;  </div><div class="line">    Transction  tr=session.beginTransactino();  </div><div class="line">    String hql=<span class="string">"select new Dept(model.deptName,model.createDate) from Dept as model"</span>;  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery();  </div><div class="line">    <span class="keyword">List</span>&lt;Dept&gt; deptList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">    <span class="keyword">for</span>(Dept dept:deptList)&#123;  </div><div class="line">        System.<span class="keyword">out</span>.println(dept.deptName);  </div><div class="line">        dept.setDetpName(<span class="string">"test"</span>);  </div><div class="line">        session.saveOrUpdate(dept);  </div><div class="line">    &#125;  </div><div class="line">    tr.commit();  </div><div class="line">      <span class="comment">// 最后 根本就没有更新 而是 在数据库中 插入 新的记录  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>查询单个对象:<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> testQueryUn()&#123;  </div><div class="line">        <span class="keyword">String</span> hql=<span class="string">"select model.deptName from Dept as model where model.deptId=2"</span>;  </div><div class="line">        Query query=session.createQuery(hql);  </div><div class="line">        query.setMaxResults(<span class="number">1</span>);  </div><div class="line">        <span class="keyword">String</span> deptName=(<span class="keyword">String</span>)query.uniqueResult();  </div><div class="line">        System.out.<span class="built_in">println</span>(deptNamae);  </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>绑定参数:<br>1.使用 “:”加参数名 绑定参数<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public void  testQueryByParamsName()&#123;  </div><div class="line">           <span class="comment">//使用  ":参数名" 来传递参数  </span></div><div class="line">    String hql="from Dept <span class="keyword">as</span> model where   </div><div class="line">odel.deptName=:deptName and model.createDate=:createDate";  </div><div class="line">  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">    <span class="keyword">query</span>.setString(<span class="string">"deptName"</span>,<span class="string">"test"</span>);  </div><div class="line">    <span class="keyword">query</span>.setString(<span class="string">"ceateDate"</span>,<span class="string">"2000-02-10"</span>);  </div><div class="line">    <span class="keyword">List</span>&lt;Dept&gt; deptList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">    <span class="keyword">for</span>()&#123;&#125;  </div><div class="line">      </div><div class="line">    <span class="comment">//...  </span></div><div class="line">      </div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.使用 “?” 按照位置来绑定参数<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public void testQueryByParamsID()&#123;  </div><div class="line">    String hql=<span class="string">"from Dept as model where model.deptName=? and model.createDate=?"</span>;  </div><div class="line">    <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">    <span class="keyword">query</span>.setString(0,<span class="string">"test"</span>);  </div><div class="line">    <span class="keyword">query</span>.setString(1,<span class="string">"2000-02-02"</span>);  </div><div class="line">    <span class="keyword">List</span>&lt;Dept&gt; <span class="keyword">list</span>=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">    <span class="keyword">for</span>()&#123;&#125;  </div><div class="line">    <span class="comment">//..  </span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>3.采用setEntity() 将参数和一个持久化对象进行绑定<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public void testQueryByDept()&#123;  </div><div class="line">        Dept dept=(Dept)Session.<span class="built_in">get</span>(Dept.clas,new Integer(2));  </div><div class="line">        String hql=<span class="string">"select Employee  as model where model.dept=?"</span>  </div><div class="line">        <span class="keyword">Query</span> <span class="keyword">query</span>=session.createQuery(hql);  </div><div class="line">        <span class="keyword">query</span>.setEntity(0,dept);  </div><div class="line">        <span class="keyword">List</span>&lt;Employee&gt; empList=<span class="keyword">query</span>.<span class="keyword">list</span>();  </div><div class="line">        <span class="keyword">for</span>()&#123;&#125;  </div><div class="line">        <span class="comment">//..  </span></div><div class="line">          </div><div class="line">          </div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<p>Spring对Dao编写的支持:提供了一套抽象的Dao类:<br>JdbcTemplate:封装常用JDBC方法,封装了连接获取以及连接释放等工作,避免忘记关闭连接等错误;<br>queryForInt(),queryForObject(),query(),update(),execute();(JdbcTemplate方法)<br>HibernateTemplate:封装常用Hibernate方法<br>JdbcDaoSupport:JDBC数据访问对象基类<br>HibernateDaoSupport:Hibernate数据访问对象的基类<br>基于JDBC技术编写DAO组件的两种模式:<br>1.DAO继承JdbcDaoSupport,通过getJdbcTemplate()方法获取JdbcTemplate对象,需要在DAO实现类中注入一个DataSource对象来完成JdbcTemplate的实例化</p>
<p>2.DAO不继承JdbcDaoSupport,在Spring容器中配置一个JdbcTemplate的bean,然后注入给DAO实现类(更优雅)<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;bean id=<span class="string">"myDataSource"</span> <span class="keyword">class</span>=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span> destroy-method=<span class="string">"close"</span>&gt;</div><div class="line">	&lt;property name=<span class="string">"driverClassName"</span> <span class="keyword">value</span>=<span class="string">"..."</span>/&gt;</div><div class="line">	&lt;property name=<span class="string">"url"</span> <span class="keyword">value</span>=<span class="string">"..."</span>/&gt;</div><div class="line">	&lt;property name=<span class="string">"username"</span> <span class="keyword">value</span>=<span class="string">"..."</span>/&gt;</div><div class="line">	&lt;property name=<span class="string">"password"</span> <span class="keyword">value</span>=<span class="string">"..."</span>/&gt;</div><div class="line">&lt;/bean&gt;</div><div class="line">&lt;bean id=<span class="string">"jdbcTemplate"</span> <span class="keyword">class</span>=<span class="string">"org.springframework.jdbc.core.JdbcTemplate"</span>&gt;</div><div class="line">	&lt;property name=<span class="string">"dataSource"</span> <span class="keyword">ref</span>=<span class="string">"myDataSource"</span>/&gt;</div><div class="line">&lt;/bean&gt;</div><div class="line">@resource</div><div class="line"><span class="keyword">private</span> JdbcTemplate template;	<span class="comment">//写在Dao中的</span></div></pre></td></tr></table></figure></p>
<h1 id="mybatis-持久层框架"><a href="#mybatis-持久层框架" class="headerlink" title="mybatis(持久层框架):"></a>mybatis(持久层框架):</h1><p>mybatis让程序员将主要精力放在sql上,通过mybatis提供的映射方式,自由灵活生成(半自动化,大部分需要程序员编写sql)满足需要sql语句<br>mybatis可以将向preparedStatement中的输入参数自动进行输入映射,将查询结果集灵活映射成java对象(HashMap,JavaBean,基本数据类型)。(输出映射)<br>1.sqlMaoConfig.xml(是mybatis的全局配置文件，名称是不固定的)配置了数据源，事务等mybatis运行环境<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="comment">&lt;!-- 和Spring整合后environments配置将废除 --&gt;</span></span></div><div class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;jdbc.driver&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;jdbc.url&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;jdbc.username&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$</span></span><span class="template-variable">&#123;jdbc.password&#125;</span><span class="xml"><span class="tag"><span class="string">"</span>/&gt;</span></span></div><div class="line">		<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 加载映射文件 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"config/User.xml"</span>/&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 通过resource方法,一次加载一个映射文件 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"config/UserMapper.xml"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"config/OrdersMapperCustom.xml"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>根据数据表编写实体类，然后配置映射文件(n个)(配置sql语句)<br>mapper.xml（映射文件）mapper.xml,mapper.xml<br>User.xml<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"test"</span>&gt;</span></span></div><div class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"mybatis.po.User"</span>&gt;</span></div><div class="line">	select * from user where id = #<span class="template-variable">&#123;id&#125;</span><span class="xml"></span></div><div class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserByName"</span> <span class="attr">parameterType</span>=<span class="string">"java.lang.String"</span> <span class="attr">resultType</span>=<span class="string">"mybatis.po.User"</span>&gt;</span></div><div class="line">		select * from user where username like '%$<span class="template-variable">&#123;value&#125;</span><span class="xml">%'</span></div><div class="line">	<span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insertUser"</span> <span class="attr">parameterType</span>=<span class="string">"mybatis.po.User"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span> <span class="attr">resultType</span>=<span class="string">"int"</span> <span class="attr">order</span>=<span class="string">"AFTER"</span>&gt;</span></div><div class="line">		select last_insert_id()</div><div class="line">	<span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></div><div class="line">		insert into user (id,username,birthday,sex,address)value(#<span class="template-variable">&#123;id&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;username&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;birthday&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;sex&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;address&#125;</span><span class="xml">)</span></div><div class="line">	<span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">"deleteUser"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span>&gt;</span></div><div class="line">		delete from user where id=#<span class="template-variable">&#123;id&#125;</span><span class="xml"></span></div><div class="line">	<span class="tag">&lt;/<span class="name">delete</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateUser"</span> <span class="attr">parameterType</span>=<span class="string">"mybatis.po.User"</span>&gt;</span></div><div class="line">		update user set username=#<span class="template-variable">&#123;username&#125;</span><span class="xml">,birthday=#</span><span class="template-variable">&#123;birthday&#125;</span><span class="xml">,sex=#</span><span class="template-variable">&#123;sex&#125;</span><span class="xml">,address=#</span><span class="template-variable">&#123;address&#125;</span><span class="xml"> where id = #</span><span class="template-variable">&#123;id&#125;</span><span class="xml"></span></div><div class="line">	<span class="tag">&lt;/<span class="name">update</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>UserMapper.xml:<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;mapper <span class="keyword">namespace</span>=<span class="string">"mybatis.mapper.UserMapper"</span>&gt;</div><div class="line">	&lt;cache/&gt;</div><div class="line">	&lt;<span class="keyword">select</span> id=<span class="string">"findUserById"</span> parameterType=<span class="string">"int"</span> resultType=<span class="string">"mybatis.po.User"</span>&gt;</div><div class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> user <span class="keyword">where</span> id = <span class="meta">#&#123;id&#125;</span></div><div class="line">	&lt;/<span class="keyword">select</span>&gt;</div><div class="line">&lt;/mapper&gt;</div></pre></td></tr></table></figure></p>
<p>2.SqlSessionFactory(会话工厂)<br>作用:创建SqlSession<br>dao开发方法:<br>SqlSession sqlSession = sqlSessionFactory.openSession();<br>sqlSession.delete(“test.deleteUser”,id);<br>User user = sqlSession.selectOne(“test.findUserById”,id);<br>sqlSession.insert(“test.insertUser”, user);<br>mapper代理开发方法:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> mybatis.mapper;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</div><div class="line">	<span class="comment">//根据id查询用户信息,抛异常有利于健壮性</span></div><div class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserById</span><span class="params">(<span class="keyword">int</span> id)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//用户信息综合查询</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;UserCustom&gt; <span class="title">findUserList</span><span class="params">(UserQueryVo userQueryVo)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//用户信息综合查询总数</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findUserCount</span><span class="params">(UserQueryVo userQueryVo)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//根据id查询用户信息,使用resultMap输出</span></div><div class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">findUserByIdResultMap</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//根据用户名列查询用户列表</span></div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;User&gt; <span class="title">findUserByName</span><span class="params">(String name)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//添加用户信息</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertUser</span><span class="params">(User user)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//删除用户信息</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteUser</span><span class="params">(<span class="keyword">int</span> id)</span> <span class="keyword">throws</span> Exception</span>;</div><div class="line">	<span class="comment">//更新用户</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateUser</span><span class="params">(User user)</span><span class="keyword">throws</span> Exception</span>;</div><div class="line">&#125;</div><div class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</div><div class="line"><span class="comment">//创建UserMapper对象,mybatis自动生成mapper代理对象</span></div><div class="line">UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</div><div class="line"><span class="comment">//调用userMapper的方法</span></div><div class="line">User user = userMapper.findUserById(<span class="number">1</span>);</div></pre></td></tr></table></figure></p>
<p>3.SqlSession(会话),是一个接口,面向用户(程序员)的接口<br>作用:操作数据库(发出sql增删改查)<br>4.Executor(执行器),是一个接口(基本执行器,缓存执行器)<br>作用:SqlSession内部通过执行器操作数据库<br>5.mapped statement(底层封装对象)<br>作用:对操作数据库存储封装,包括sql语句,输入参数,输出结果类型<br>6.动态sql:与JSTL相似,允许我们在XML中构建不同的SQL语句<br>判断元素:if,choose<br>关键字元素:where:简化查询语句中where部分的条件判断。<br>set:用在更新操作的时候，作用和where相似;trim<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findByCondition"</span> <span class="attr">parameterType</span>=<span class="string">"Emp"</span> <span class="attr">resultType</span>=<span class="string">"Emp"</span>&gt;</span></span></div><div class="line">select * from EMP</div><div class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"deptno!=null"</span>&gt;</span></div><div class="line">	 DEPTNO=#<span class="template-variable">&#123;deptno&#125;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">choose</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">"sal&gt;2000"</span>&gt;</span></div><div class="line">		and SAL&gt;=#<span class="template-variable">&#123;sal&#125;</span><span class="xml"></span></div><div class="line">	<span class="tag">&lt;/<span class="name">when</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></div><div class="line">		and SAL&gt;=2000</div><div class="line">	<span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">choose</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">"updateEmp"</span> <span class="attr">parameterType</span>=<span class="string">"Emp"</span>&gt;</span></div><div class="line">update EMP</div><div class="line"><span class="tag">&lt;<span class="name">set</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"ename!=null"</span>&gt;</span></div><div class="line">		ENAME=#<span class="template-variable">&#123;ename&#125;</span><span class="xml">,</span></div><div class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"deptno!=null"</span>&gt;</span></div><div class="line">		DEPTNO=#<span class="template-variable">&#123;deptno&#125;</span><span class="xml"></span></div><div class="line">	<span class="tag">&lt;/<span class="name">if</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">set</span>&gt;</span></div><div class="line">where EMPNO=#<span class="template-variable">&#123;empno&#125;</span><span class="xml"></span></div><div class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>循环元素:foreach:实现了循环逻辑,可以进行一个集合的迭代<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">select</span> id=<span class="string">"findByDeptNos"</span> resultType=<span class="string">"Emp"</span> parameterType=<span class="string">"Emp"</span>&gt;</div><div class="line"><span class="keyword">select</span> * <span class="keyword">from</span> EMP</div><div class="line">&lt;<span class="keyword">if</span> test=<span class="string">"deptnos!=null"</span>&gt;</div><div class="line"><span class="keyword">where</span> DEPTNO <span class="keyword">in</span></div><div class="line">&lt;<span class="keyword">foreach</span> collection=<span class="string">"deptnos"</span> item=<span class="string">"dno"</span> open=<span class="string">"("</span> close=<span class="string">")"</span> separator=<span class="string">","</span>&gt;</div><div class="line">	<span class="meta">#&#123;dno&#125;</span></div><div class="line">&lt;/<span class="keyword">foreach</span>&gt;</div><div class="line">&lt;/<span class="keyword">if</span>&gt;</div><div class="line">&lt;/<span class="keyword">select</span>&gt;</div></pre></td></tr></table></figure></p>
<p>7.关系映射<br>主键自动递增:MySQL、SQLServer数据库都支持字段自动递增功能,在使用MyBatis时，有时要返回MySQL、SQLServer数据库自动增长的主键值<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">insert</span> id=<span class="string">"addDept"</span> parameterType=<span class="string">"Dept"</span> keyProperty=<span class="string">"deptno"</span> useGeneratedKeys=<span class="string">"true"</span>&gt;</div><div class="line"><span class="keyword">insert</span> into T_DEPT (DNAME,LOC)<span class="built_in">values</span>(#&#123;dname&#125;,#&#123;<span class="keyword">loc</span>&#125;)</div><div class="line">&lt;/<span class="keyword">insert</span>&gt;</div></pre></td></tr></table></figure></p>
<p>在<code>&lt;insert&gt;</code>元素指定了自动激增属性设置后，MyBatis会在插入操作后将自动生成的主键值给keyProperty指定的属性赋值<br>非自动递增:Oracle不支持自动递增,采用序列生成主键值<br><figure class="highlight dust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"addDept"</span> <span class="attr">parameterType</span>=<span class="string">"Dept"</span>&gt;</span></span></div><div class="line">	<span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"deptno"</span> <span class="attr">order</span>=<span class="string">"before"</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></div><div class="line">		select dept_seq.nextval from dual</div><div class="line">	<span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></div><div class="line">insert into T_DEPT (DEPTNO,DNAME,LOC)values(#<span class="template-variable">&#123;deptno&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;dname&#125;</span><span class="xml">,#</span><span class="template-variable">&#123;loc&#125;</span><span class="xml">)</span></div><div class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>关联映射作用:获取两个或以上关联表的数据<br>嵌套查询映射(查两次):<br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;<span class="keyword">select</span> id=<span class="string">"findById"</span> parameterType=<span class="string">"java.lang.Integer"</span> resultMap=<span class="string">"empMap"</span>&gt;</div><div class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> EMP <span class="keyword">where</span> EMPNO=<span class="meta">#&#123;id&#125;</span></div><div class="line">&lt;/<span class="keyword">select</span>&gt;</div><div class="line">&lt;<span class="keyword">select</span> id=<span class="string">"selectDept"</span> parameterType=<span class="string">"java.lang.Integer"</span> resultType=<span class="string">"Dept"</span>&gt;</div><div class="line">	<span class="keyword">select</span> * <span class="keyword">from</span> DEPT <span class="keyword">where</span> DEPTNO=<span class="meta">#&#123;id&#125;</span></div><div class="line">&lt;/<span class="keyword">select</span>&gt;</div><div class="line">&lt;resultMap type=<span class="string">"Emp"</span> id=<span class="string">"empMap"</span>&gt;</div><div class="line">	&lt;association <span class="keyword">property</span>=<span class="string">"dept"</span> column=<span class="string">"DEPTNO"</span> javaType=<span class="string">"Dept"</span> <span class="keyword">select</span>=<span class="string">"selectDept"</span> /&gt;</div><div class="line">&lt;/resultMap&gt;</div></pre></td></tr></table></figure></p>
<p>嵌套结果映射(查一次):<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;select <span class="built_in">id</span>=<span class="string">"findById"</span> parameterType=<span class="string">"java.lang.Integer"</span> resultMap=<span class="string">"empMap"</span>&gt;</div><div class="line">	select e.empno,e.ename,e.job,e.mgr,e.sal,e.comm,d.dname,d.loc <span class="keyword">from</span> EMP e join DEPT d <span class="keyword">on</span><span class="params">(d.deptno=e.deptno)</span></div><div class="line">	<span class="keyword">where</span> e.EMPNO=<span class="comment">#&#123;id&#125;</span></div><div class="line">&lt;/select&gt;</div><div class="line">&lt;resultMap type=<span class="string">"Emp"</span> <span class="built_in">id</span>=<span class="string">"empMap"</span>&gt;</div><div class="line">&lt;<span class="built_in">id</span> column=<span class="string">"EMPNO"</span> <span class="keyword">property</span>=<span class="string">"empno"</span>&gt;&lt;/<span class="built_in">id</span>&gt;</div><div class="line">&lt;<span class="literal">result</span> column=<span class="string">"ENAME"</span> <span class="keyword">property</span>=<span class="string">"ename"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">&lt;<span class="literal">result</span> column=<span class="string">"JOB"</span> <span class="keyword">property</span>=<span class="string">"job"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">&lt;<span class="literal">result</span> column=<span class="string">"SAL"</span> <span class="keyword">property</span>=<span class="string">"sal"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">&lt;<span class="literal">result</span> column=<span class="string">"COMM"</span> <span class="keyword">property</span>=<span class="string">"comm"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">&lt;association <span class="keyword">property</span>=<span class="string">"dept"</span> javaType=<span class="string">"Dept"</span>&gt;</div><div class="line">	&lt;<span class="built_in">id</span> column=<span class="string">"DEPTNO"</span> <span class="keyword">property</span>=<span class="string">"deptno"</span>&gt;&lt;/<span class="built_in">id</span>&gt;</div><div class="line">	&lt;<span class="literal">result</span> column=<span class="string">"DNAME"</span> <span class="keyword">property</span>=<span class="string">"dname"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">	&lt;<span class="literal">result</span> column=<span class="string">"LOC"</span> <span class="keyword">property</span>=<span class="string">"loc"</span>&gt;&lt;/<span class="literal">result</span>&gt;</div><div class="line">&lt;/association&gt;</div><div class="line">&lt;/resultMap&gt;</div></pre></td></tr></table></figure></p>
<p>mybatis开发dao两种方式:<br>原始dao开发方法(程序需要编写dao接口和dao实现类)(掌握)<br>mybatis的mapper接口(相当于dao接口)代理开发方法(掌握)<br>mybatis配置文件SqlMapConfig.xml<br>mybatis核心:<br>    mybatis输入映射(掌握)parameterType：指定输入参数类型可以简单类型、pojo、hashmap。。<br>    mybatis输出映射(掌握)resultType,resultMap<br>    mybatis的动态sql(掌握)</p>
<p>高级知识:<br>订单商品数据模型分析<br>高级结果集映射(一对一,一对多,多对多)<br>mybatis延迟加载<br>mybatis查询缓存(一级缓存,二级缓存)<br>mybatis和spring进行整合(掌握)<br>mybatis逆向工程</p>
<p>mybatis和hibernate本质区别和应用场景:<br>hiberbate：是一个标准ORM框架(对象关系映射)。入门门槛较高的,不需要程序员写sql,sql语句自动生成了。<br>对sql语句进行优化、修改比较困难的。<br>应用场景:适用于需求变化不多的中小型项目,比如说:后台管理系统,erp,orm,oa….<br>mybatis:专注是sql本身,需要程序员自己编写sql语句,sql修改、优化比较方便。mybatis是一个不完全的ORM框架,<br>虽然程序员自己写sql,mybatis也可以实现映射(输入映射,输出映射)。使用于需求变化较多的项目,比如:互联网项目。<br>企业进行技术选型:以低成本 高回报作为技术选型的原则,根据项目组的技术力量进行选择。<br>说白点,hibernate不需要写sql,mybatis需要写sql</p>
<p>Spring与MyBatis整合:<br>SqlSessionFactoryBean:为整合应用提供SqlSession对象;在applicationContext.xml中定义格式如下:<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;bean <span class="built_in">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="built_in">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</div><div class="line">	&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"dataSource"</span> <span class="keyword">ref</span>=<span class="string">"myDataSource"</span>/&gt;</div><div class="line">	&lt;<span class="keyword">property</span> <span class="built_in">name</span>=<span class="string">"mapperLocations"</span> value=<span class="string">"classpath:org/yh/entity/*.xml"</span>/&gt;</div><div class="line">&lt;/bean&gt;</div></pre></td></tr></table></figure></p>
<p>MapperFactoryBean:根据Mapper接口获取我们想要的Mapper对象<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"deptMapper"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperFactoryBean"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--指定Mapper接口,用来返回Mapper对象 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperInterface"</span> <span class="attr">value</span>=<span class="string">"org.yh.mapper.DeptMapper"</span> /&gt;</span></div><div class="line"><span class="comment">&lt;!--指定SqlSessionFactoryBean对象,用于提供SqlSession --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>MapperScannerConfigurer:通过这个组件会自动扫描各个Mapper接口,并注册对应的MapperFactoryBean对象<br>basePackage用于指定Mapper接口所在的包,将Mapper接口注册为对象,多个包之间可以用逗号或者分号分隔。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;bean <span class="class"><span class="keyword">class</span></span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"org.yh.mapper"</span> /&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>基于SqlSessionTemplate的DAO配置信息:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionTemplate"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">"0"</span> <span class="attr">ref</span>=<span class="string">"sqlSessionFactory"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--扫描DAO并注入template,可以用注解方式实现 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"org.yh.dao"</span> /&gt;</span></div></pre></td></tr></table></figure></p>
<p>DAO实现与之前单独MyBatis一致</p>
<p>单元测试:<br>导包:项目–&gt;右键–&gt;Properties–&gt;Java Build Path–&gt;Libraries–&gt;Add Library–&gt;JUnit–&gt;next–&gt;Junit4–&gt;finish<br>测试方法前加 @Test ;测试的时候,代码内(测试加了 @Test 的所有方法)/要测试的方法名(测试当前方法)–&gt;右键–&gt;Run As –&gt;JUnit Test</p>
<p>Basic–&gt;OOP(object oriented programming面向对象)–&gt;SE(standard edition标准版)–&gt;ORACLE—&gt;MYSQL–&gt;JDBC(JavaDateBaseConnection)–&gt;HTML–&gt;<br>CSS(层叠样式表)–&gt;JS(JavaScripe)–&gt;servlet–&gt;JSP–&gt;Ajax–&gt;JQuery–&gt;Spring–&gt;MyBatis–&gt;Struts–&gt;Hibernate–&gt;Struts</p>
<h1 id="垃圾回收-GC-Gabage-Collection"><a href="#垃圾回收-GC-Gabage-Collection" class="headerlink" title="垃圾回收(GC  Gabage Collection):"></a>垃圾回收(GC  Gabage Collection):</h1><p>内存由 Perm(Permanent Generation,持久带,放JVM自己的反射对象，比如类对象和方法对象等)和 Heap(堆) 组成. 其中Heap = {Old + NEW = { Eden , from, to } }<br>JVM内存模型中分两大块，一块是 NEW Generation, 另一块是Old Generation. 在New Generation中，有一个叫Eden的空间，主要是用来存放新生的对象，<br>还有两个Survivor Spaces（from,to）, 它们用来存放每次垃圾回收后存活下来的对象。        在Old Generation中，主要存放应用程序中生命周期长的内存对象<br>垃圾回收描述：<br>在New Generation块中，垃圾回收一般用Copying的算法，速度快。每次GC的时候，存活下来的对象首先由Eden拷贝到某个Survivor Space,<br>当Survivor Space空间满了后, 剩下的live对象就被直接拷贝到Old Generation中去。因此，每次GC后，Eden内存块会被清空。<br>在Old Generation块中，垃圾回收一般用mark-compact的算法，速度慢些，但减少内存要求.垃圾回收分多级，0级为全部(Full)的垃圾回收，会回收OLD段中的垃圾；<br>1级或以上为部分垃圾回收，只会回收NEW中的垃圾，内存溢出通常发生于OLD段或Perm段垃圾回收后，仍然无内存空间容纳新的Java对象的情况。<br>1．增加Heap的大小虽然会降低GC的频率，但也增加了每次GC的时间。并且GC运行时，所有的用户线程将暂停，也就是GC期间，Java应用程序不做任何工作。<br>标记-清除（Mark-Sweep）,复制（Copying）,标记-整理（Mark-Compact）,</p>
<h1 id="内存溢出"><a href="#内存溢出" class="headerlink" title="内存溢出"></a>内存溢出</h1><p>jvm管理的内存大致包括三种不同类型的内存区域：Permanent Generation space（永久保存区域）、Heap space(堆区域)、Java Stacks(Java栈）。</p>
<p>第一种OutOfMemoryError： PermGen space<br>发生这种问题的原意是程序中使用了大量的jar或class，使java虚拟机装载类的空间不够，与Permanent Generation space有关。解决这类问题有以下两种办法：</p>
<ol>
<li>增加java虚拟机中的XX:PermSize和XX:MaxPermSize参数的大小，其中XX:PermSize是初始永久保存区域大小，XX:MaxPermSize是最大永久保存区域大小。如针对tomcat6.0，在catalina.sh 或catalina.bat文件中一系列环境变量名说明结束处（大约在70行左右） 增加一行：<br>JAVA_OPTS=” -XX:PermSize=64M -XX:MaxPermSize=128m”<br>如果是windows服务器还可以在系统环境变量中设置。</li>
<li>清理应用程序中web-inf/lib下的jar，如果tomcat部署了多个应用，很多应用都使用了相同的jar，可以将共同的jar移到tomcat共同的lib下，减少类的重复加载。</li>
</ol>
<p>第二种OutOfMemoryError：  Java heap space<br>发生这种问题的原因是java虚拟机创建的对象太多，在进行垃圾回收之间，虚拟机分配的到堆内存空间已经用满了，与Heap space有关。解决这类问题有两种思路：</p>
<ol>
<li>检查程序，看是否有死循环或不必要地重复创建大量对象。找到原因后，修改程序和算法。</li>
<li>增加Java虚拟机中Xms（初始堆大小）和Xmx（最大堆大小）参数的大小。如：set JAVA_OPTS= -Xms256m -Xmx1024m</li>
</ol>
<p>第三种OutOfMemoryError：unable to create new native thread<br>这种错误在Java线程个数很多的情况下容易发生</p>
<p>如果想要堆溢出，比较简单，可以循环创建对象或大的对象；<br>如果想要栈溢出，可以递归调用方法，这样随着栈深度的增加，JVM 维持着一条长长的方法调用轨迹，直到内存不够分配，产生栈溢出。<br>另外，Java虚拟机的堆大小如何设置：命令行<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">　java –Xms128m <span class="comment">//JVM占用最小内存</span></div><div class="line">–Xmx512m <span class="comment">//JVM占用最大内存</span></div><div class="line">–<span class="string">XX:</span>PermSize=<span class="number">64</span>m <span class="comment">//最小堆大小</span></div><div class="line">–<span class="string">XX:</span>MaxPermSize=<span class="number">128</span>m <span class="comment">//最大堆大小</span></div></pre></td></tr></table></figure></p>
<p>SVN 修改账号密码： C:\Users\HP\AppData\Roaming\Subversion\auth 路径下的文件删除（该文件是隐藏的，需要设置，隐藏可见）</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div>「真诚赞赏，手留余香」</div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/images/weixin.jpg" alt="杨辉 WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/images/zhifubao.jpg" alt="杨辉 Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/随笔/" rel="tag"># 随笔</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/01/08/hangdian/" rel="next" title="在杭州电子科技大学就读是怎样一番体验？">
                <i class="fa fa-chevron-left"></i> 在杭州电子科技大学就读是怎样一番体验？
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/01/10/playMusic/" rel="prev" title="播放音乐，博客随之shake">
                播放音乐，博客随之shake <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/author.jpg"
               alt="杨辉" />
          <p class="site-author-name" itemprop="name">杨辉</p>
           
              <p class="site-description motion-element" itemprop="description">淡泊以明志，宁静而致远</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">46</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/hdyang12" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.csdn.net/qq619771478" title="CSDN" target="_blank">CSDN</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#面向对象-OOP-object-oriented-programming-封装-继承-多态"><span class="nav-number">1.</span> <span class="nav-text">面向对象(OOP object oriented programming):封装,继承,多态</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#封装"><span class="nav-number">1.1.</span> <span class="nav-text">封装:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#抽象"><span class="nav-number">1.2.</span> <span class="nav-text">抽象:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#接口"><span class="nav-number">1.3.</span> <span class="nav-text">接口:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#内部类-一个类-Inner-定义在另一个类-Outer-的内部-对外不具备可见性-Inner可以调用Outer的"><span class="nav-number">1.4.</span> <span class="nav-text">内部类:一个类(Inner)定义在另一个类(Outer)的内部,对外不具备可见性,Inner可以调用Outer的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#static-静态的-不依赖对象存在的"><span class="nav-number">1.5.</span> <span class="nav-text">static:静态的,不依赖对象存在的</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#final"><span class="nav-number">1.6.</span> <span class="nav-text">final:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#正则表达式"><span class="nav-number">2.</span> <span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#API"><span class="nav-number">3.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#String"><span class="nav-number">3.1.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#StringBuilder"><span class="nav-number">3.2.</span> <span class="nav-text">StringBuilder</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Integer"><span class="nav-number">3.3.</span> <span class="nav-text">Integer:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JDK5新特性"><span class="nav-number">3.4.</span> <span class="nav-text">JDK5新特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类Math："><span class="nav-number">3.5.</span> <span class="nav-text">类Math：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类Date"><span class="nav-number">3.6.</span> <span class="nav-text">类Date:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类SimpleDateFormat"><span class="nav-number">3.7.</span> <span class="nav-text">类SimpleDateFormat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类Calendar-日历类"><span class="nav-number">3.8.</span> <span class="nav-text">类Calendar(日历类)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合类"><span class="nav-number">3.9.</span> <span class="nav-text">集合类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#迭代器方法"><span class="nav-number">3.9.1.</span> <span class="nav-text">迭代器方法:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LinkedList集合方法"><span class="nav-number">3.9.2.</span> <span class="nav-text">LinkedList集合方法:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#自然排序"><span class="nav-number">3.9.3.</span> <span class="nav-text">自然排序:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#比较器排序"><span class="nav-number">3.9.4.</span> <span class="nav-text">比较器排序:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#异常处理"><span class="nav-number">3.10.</span> <span class="nav-text">异常处理:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类File"><span class="nav-number">3.11.</span> <span class="nav-text">类File</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IO流"><span class="nav-number">3.12.</span> <span class="nav-text">IO流</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#输入输出到文件中"><span class="nav-number">3.13.</span> <span class="nav-text">输入输出到文件中</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多线程-t-start-后才执行run-方法"><span class="nav-number">3.14.</span> <span class="nav-text">多线程(t.start();后才执行run()方法):</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TCP通信"><span class="nav-number">3.15.</span> <span class="nav-text">TCP通信:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#枚举-enum"><span class="nav-number">3.16.</span> <span class="nav-text">枚举:enum;</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库"><span class="nav-number">4.</span> <span class="nav-text">数据库:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JDBC-Java-Datebase-Connectivity"><span class="nav-number">5.</span> <span class="nav-text">JDBC(Java Datebase Connectivity)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#HTML"><span class="nav-number">6.</span> <span class="nav-text">HTML</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CSS"><span class="nav-number">7.</span> <span class="nav-text">CSS</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JS"><span class="nav-number">8.</span> <span class="nav-text">JS</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DOM"><span class="nav-number">9.</span> <span class="nav-text">DOM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Servlet"><span class="nav-number">10.</span> <span class="nav-text">Servlet</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-不需要经过部署"><span class="nav-number">11.</span> <span class="nav-text">JSP(不需要经过部署):</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Cookie-客户端状态管理技术"><span class="nav-number">12.</span> <span class="nav-text">Cookie(客户端状态管理技术)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Session-服务器状态管理技术"><span class="nav-number">13.</span> <span class="nav-text">Session(服务器状态管理技术):</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#过滤器监听器"><span class="nav-number">14.</span> <span class="nav-text">过滤器监听器</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#EL-JSTL"><span class="nav-number">15.</span> <span class="nav-text">EL JSTL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Ajax"><span class="nav-number">16.</span> <span class="nav-text">Ajax</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSON"><span class="nav-number">17.</span> <span class="nav-text">JSON</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jQuery"><span class="nav-number">18.</span> <span class="nav-text">jQuery</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#反射"><span class="nav-number">19.</span> <span class="nav-text">反射</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring"><span class="nav-number">20.</span> <span class="nav-text">Spring</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Spring-MVC-控制层-Controller"><span class="nav-number">21.</span> <span class="nav-text">Spring MVC:控制层(Controller)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Struts2-控制层-Controller"><span class="nav-number">22.</span> <span class="nav-text">Struts2:控制层(Controller)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Hibernate-数据访问层"><span class="nav-number">23.</span> <span class="nav-text">Hibernate(数据访问层)</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mybatis-持久层框架"><span class="nav-number">24.</span> <span class="nav-text">mybatis(持久层框架):</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#垃圾回收-GC-Gabage-Collection"><span class="nav-number">25.</span> <span class="nav-text">垃圾回收(GC  Gabage Collection):</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#内存溢出"><span class="nav-number">26.</span> <span class="nav-text">内存溢出</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">杨辉</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

<br/>
<div class="powered-by">
<span id="busuanzi_container_site_uv"> 
  本站访客数 <span id="busuanzi_value_site_uv"></span> 人
</span>
</div>
<span id="busuanzi_container_site_pv"> 
  本站总访问量 <span id="busuanzi_value_site_pv"></span> 次
</span>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  
    
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "4e23027f183547059b04893d59788da5",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
  










  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("WVkl2iB2BaJcwxurjLC9hGFS-gzGzoHsz", "MAp4EhLfpT7JJAODisjq2rSh");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

  <script type="text/javascript">  
	function IsPC() {
		var userAgentInfo = navigator.userAgent;
		var Agents = ["Android", "iPhone",
					"SymbianOS", "Windows Phone",
					"iPad", "iPod"];
		var flag = true;
		for (var v = 0; v < Agents.length; v++) {
			if (userAgentInfo.indexOf(Agents[v]) > 0) {
				flag = false;
				break;
			}
		}
		return flag;
	} 
  
var scriptNode = document.createElement("script"); 
scriptNode.setAttribute("type", "text/javascript");  
  
if(IsPC()){  
	<!-- 背景动画 -->
    scriptNode.setAttribute("src", "/js/src/particle.js");  
} 
 
document.head.appendChild(scriptNode); 
</script>
</body>
<!-- 背景动画
<script type="text/javascript" src="/js/src/particle.js"></script> -->
<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/love.js"></script>
</html>
